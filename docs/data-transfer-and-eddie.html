<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Data Transfer and Eddie | The Surgical Informatics Cookbook</title>
  <meta name="description" content="All the brilliant bits of code we don’t want to forget." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Data Transfer and Eddie | The Surgical Informatics Cookbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="All the brilliant bits of code we don’t want to forget." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Data Transfer and Eddie | The Surgical Informatics Cookbook" />
  
  <meta name="twitter:description" content="All the brilliant bits of code we don’t want to forget." />
  

<meta name="author" content="Surgical Informatics, University of Edinburgh" />


<meta name="date" content="2024-01-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="machine-learning.html"/>
<link rel="next" href="plotting.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.29/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-buttons-1.13.4/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.13.4/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.13.4/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.13.4/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.13.4/js/buttons.print.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/dt-plugin-searchhighlight-1.13.4/source.css" rel="stylesheet" />
<script src="libs/dt-plugin-searchhighlight-1.13.4/jquery.highlight.js"></script>
<script src="libs/dt-plugin-searchhighlight-1.13.4/source.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Surgical Informatics Cookbook</a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#how-to-contribute"><i class="fa fa-check"></i><b>1.1</b> How to contribute</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#indexing"><i class="fa fa-check"></i><b>1.2</b> Indexing</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#index"><i class="fa fa-check"></i><b>1.2.1</b> Index</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#chapter-and-section-references"><i class="fa fa-check"></i><b>1.2.2</b> Chapter and section references</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction.html"><a href="introduction.html#figure-and-table-references"><i class="fa fa-check"></i><b>1.2.3</b> Figure and table references</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction.html"><a href="introduction.html#citations"><i class="fa fa-check"></i><b>1.2.4</b> Citations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="snippets.html"><a href="snippets.html"><i class="fa fa-check"></i><b>2</b> Snippets</a>
<ul>
<li class="chapter" data-level="2.1" data-path="snippets.html"><a href="snippets.html#useful-rstudio-functions"><i class="fa fa-check"></i><b>2.1</b> Useful RStudio functions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="snippets.html"><a href="snippets.html#clean-restart"><i class="fa fa-check"></i><b>2.1.1</b> Clean restart</a></li>
<li class="chapter" data-level="2.1.2" data-path="snippets.html"><a href="snippets.html#remove-duplicated-packages-between-personal-and-system-libraries"><i class="fa fa-check"></i><b>2.1.2</b> Remove duplicated packages between personal and system libraries</a></li>
<li class="chapter" data-level="2.1.3" data-path="snippets.html"><a href="snippets.html#remove-large-file-accidentally-committed-to-git"><i class="fa fa-check"></i><b>2.1.3</b> Remove large file accidentally committed to git</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="snippets.html"><a href="snippets.html#memory-and-efficient-ram-usage"><i class="fa fa-check"></i><b>2.2</b> Memory and efficient RAM usage</a></li>
<li class="chapter" data-level="2.3" data-path="snippets.html"><a href="snippets.html#exporting-tables-that-work-in-both-pdf-and-word"><i class="fa fa-check"></i><b>2.3</b> Exporting tables that work in both PDF and Word</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="snippets.html"><a href="snippets.html#warning-in-kableextra.-please-specify-format-in-kable.-kableextra-can-customize-either-html-or-latex-outputs."><i class="fa fa-check"></i><b>2.3.1</b> Warning in kableExtra. Please specify format in kable. kableExtra can customize either HTML or LaTeX outputs.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="snippets.html"><a href="snippets.html#creating-reproducible-r-examples-to-share-in-the-group-binder-holepunch-and-docker"><i class="fa fa-check"></i><b>2.4</b> Creating Reproducible R Examples to Share in the Group (binder, holepunch and docker)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="snippets.html"><a href="snippets.html#create-basic-reproducible-examples"><i class="fa fa-check"></i><b>2.4.1</b> Create Basic Reproducible Examples</a></li>
<li class="chapter" data-level="2.4.2" data-path="snippets.html"><a href="snippets.html#holepunch---complex-reproducible-examples"><i class="fa fa-check"></i><b>2.4.2</b> <code>holepunch</code> - Complex Reproducible Examples</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="snippets.html"><a href="snippets.html#working-with-chis"><i class="fa fa-check"></i><b>2.5</b> Working with CHIs</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="snippets.html"><a href="snippets.html#chi_dob---extract-date-of-birth-from-chi"><i class="fa fa-check"></i><b>2.5.1</b> <code>chi_dob()</code> - Extract date of birth from CHI</a></li>
<li class="chapter" data-level="2.5.2" data-path="snippets.html"><a href="snippets.html#chi_gender---extract-gender-from-chi"><i class="fa fa-check"></i><b>2.5.2</b> <code>chi_gender()</code> - Extract gender from CHI</a></li>
<li class="chapter" data-level="2.5.3" data-path="snippets.html"><a href="snippets.html#chi_age---extract-age-from-chi"><i class="fa fa-check"></i><b>2.5.3</b> <code>chi_age()</code> - Extract age from CHI</a></li>
<li class="chapter" data-level="2.5.4" data-path="snippets.html"><a href="snippets.html#chi_valid---logical-test-for-valid-chi"><i class="fa fa-check"></i><b>2.5.4</b> <code>chi_valid()</code> - Logical test for valid CHI</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="snippets.html"><a href="snippets.html#working-with-dates"><i class="fa fa-check"></i><b>2.6</b> Working with dates</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="snippets.html"><a href="snippets.html#difference-between-two-dates"><i class="fa fa-check"></i><b>2.6.1</b> Difference between two dates</a></li>
<li class="chapter" data-level="2.6.2" data-path="snippets.html"><a href="snippets.html#lags"><i class="fa fa-check"></i><b>2.6.2</b> Lags</a></li>
<li class="chapter" data-level="2.6.3" data-path="snippets.html"><a href="snippets.html#pulling-out-change-in-status-data"><i class="fa fa-check"></i><b>2.6.3</b> Pulling out “change in status” data</a></li>
<li class="chapter" data-level="2.6.4" data-path="snippets.html"><a href="snippets.html#guess-the-format-of-dates"><i class="fa fa-check"></i><b>2.6.4</b> Guess the Format of Dates</a></li>
<li class="chapter" data-level="2.6.5" data-path="snippets.html"><a href="snippets.html#isoweek-and-epiweek"><i class="fa fa-check"></i><b>2.6.5</b> Isoweek and epiweek</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="snippets.html"><a href="snippets.html#labelling-tables-and-figures-in-markdown-chunks"><i class="fa fa-check"></i><b>2.7</b> Labelling tables and figures in markdown chunks</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="snippets.html"><a href="snippets.html#plots"><i class="fa fa-check"></i><b>2.7.1</b> Plots</a></li>
<li class="chapter" data-level="2.7.2" data-path="snippets.html"><a href="snippets.html#tables"><i class="fa fa-check"></i><b>2.7.2</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="snippets.html"><a href="snippets.html#join-tables-and-overwrite-values-that-are-often-missing"><i class="fa fa-check"></i><b>2.8</b> Join tables and overwrite values (that are often missing)</a></li>
<li class="chapter" data-level="2.9" data-path="snippets.html"><a href="snippets.html#read-in-multiple-files"><i class="fa fa-check"></i><b>2.9</b> Read in multiple files</a></li>
<li class="chapter" data-level="2.10" data-path="snippets.html"><a href="snippets.html#averaging-multiple-aucs-say-from-imputed-datasets"><i class="fa fa-check"></i><b>2.10</b> Averaging multiple AUCs (say from imputed datasets)</a></li>
<li class="chapter" data-level="2.11" data-path="snippets.html"><a href="snippets.html#formating-thousands-automatically"><i class="fa fa-check"></i><b>2.11</b> Formating thousands automatically</a></li>
<li class="chapter" data-level="2.12" data-path="snippets.html"><a href="snippets.html#datatable-function"><i class="fa fa-check"></i><b>2.12</b> DataTable function</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>3</b> Data manipulation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#collapse-multiple-no-and-yes-options"><i class="fa fa-check"></i><b>3.1</b> Collapse multiple “no” and “yes” options</a></li>
<li class="chapter" data-level="3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#filtering-best-practice"><i class="fa fa-check"></i><b>3.2</b> Filtering best practice</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#from-jamie-farrell"><i class="fa fa-check"></i><b>3.2.1</b> From Jamie Farrell</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-manipulation.html"><a href="data-manipulation.html#filter-na-dropping-rows-where-all-specified-variables-are-na"><i class="fa fa-check"></i><b>3.3</b> Filter NA: Dropping rows where all specified variables are NA</a></li>
<li class="chapter" data-level="3.4" data-path="data-manipulation.html"><a href="data-manipulation.html#vectorising-rowwise-procedures"><i class="fa fa-check"></i><b>3.4</b> Vectorising rowwise procedures</a></li>
<li class="chapter" data-level="3.5" data-path="data-manipulation.html"><a href="data-manipulation.html#multiple-imputation-and-ipw-for-missing-data"><i class="fa fa-check"></i><b>3.5</b> Multiple imputation and IPW for missing data</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data-manipulation.html"><a href="data-manipulation.html#data"><i class="fa fa-check"></i><b>3.5.1</b> Data</a></li>
<li class="chapter" data-level="3.5.2" data-path="data-manipulation.html"><a href="data-manipulation.html#multiple-imputation"><i class="fa fa-check"></i><b>3.5.2</b> Multiple imputation</a></li>
<li class="chapter" data-level="3.5.3" data-path="data-manipulation.html"><a href="data-manipulation.html#ipw"><i class="fa fa-check"></i><b>3.5.3</b> IPW</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>4</b> Machine learning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="machine-learning.html"><a href="machine-learning.html#deep-learning"><i class="fa fa-check"></i><b>4.1</b> Deep learning</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="machine-learning.html"><a href="machine-learning.html#pulling-images-from-redcap-directly-to-argodeep"><i class="fa fa-check"></i><b>4.1.1</b> Pulling images from REDCap directly to argodeep</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html"><i class="fa fa-check"></i><b>5</b> Data Transfer and Eddie</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#uploading-and-downloading-data-the-easy-way"><i class="fa fa-check"></i><b>5.1</b> Uploading and Downloading Data the Easy Way</a></li>
<li class="chapter" data-level="5.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#alternative-methods-when-the-easy-way-wont-work"><i class="fa fa-check"></i><b>5.2</b> Alternative Methods when the Easy Way won’t work</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#what-is-eddie"><i class="fa fa-check"></i><b>5.2.1</b> What is Eddie?</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#using-the-command-line"><i class="fa fa-check"></i><b>5.3</b> Using the Command Line</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#downloads-and-setup---eddie-example"><i class="fa fa-check"></i><b>5.3.1</b> Downloads and Setup - Eddie Example</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#copy-and-paste-with-putty"><i class="fa fa-check"></i><b>5.3.2</b> Copy and Paste with PuTTY</a></li>
<li class="chapter" data-level="5.3.3" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#closing-a-session-in-putty"><i class="fa fa-check"></i><b>5.3.3</b> Closing a Session in PuTTY</a></li>
<li class="chapter" data-level="5.3.4" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#eddie-file-structure"><i class="fa fa-check"></i><b>5.3.4</b> Eddie File Structure</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#copying-data-from-eddie-into-rstudio-server"><i class="fa fa-check"></i><b>5.4</b> Copying Data from Eddie into RStudio server</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#method-1-using-putty-or-another-terminalshell-connected-to-eddie"><i class="fa fa-check"></i><b>5.4.1</b> Method 1: Using PuTTY (or another terminal/shell connected to Eddie)</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#method-2-using-the-rstudio-server-terminal"><i class="fa fa-check"></i><b>5.4.2</b> Method 2: Using the RStudio Server Terminal</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#group-folders-on-eddie-and-datastore"><i class="fa fa-check"></i><b>5.5</b> Group Folders on Eddie and DataStore</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#the-scratch-space"><i class="fa fa-check"></i><b>5.5.1</b> The Scratch Space</a></li>
<li class="chapter" data-level="5.5.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#datastore"><i class="fa fa-check"></i><b>5.5.2</b> DataStore</a></li>
<li class="chapter" data-level="5.5.3" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#running-eddie-from-rstudio-server"><i class="fa fa-check"></i><b>5.5.3</b> Running Eddie from RStudio Server</a></li>
<li class="chapter" data-level="5.5.4" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#modules-applications-in-eddie"><i class="fa fa-check"></i><b>5.5.4</b> Modules (Applications) in Eddie</a></li>
<li class="chapter" data-level="5.5.5" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#working-with-r-in-eddie"><i class="fa fa-check"></i><b>5.5.5</b> Working with R in Eddie</a></li>
<li class="chapter" data-level="5.5.6" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#specific-r-package-versions"><i class="fa fa-check"></i><b>5.5.6</b> Specific R Package Versions</a></li>
<li class="chapter" data-level="5.5.7" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#general-eddie-etiquette"><i class="fa fa-check"></i><b>5.5.7</b> General Eddie Etiquette</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#additional-resources"><i class="fa fa-check"></i><b>5.6</b> Additional Resources</a></li>
<li class="chapter" data-level="5.7" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#using-rstudio-directly-in-eddie"><i class="fa fa-check"></i><b>5.7</b> Using RStudio directly in Eddie</a></li>
<li class="chapter" data-level="5.8" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#configuring-python-deep-learning-environment-in-eddie"><i class="fa fa-check"></i><b>5.8</b> Configuring Python Deep Learning Environment in Eddie</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#package-installation"><i class="fa fa-check"></i><b>5.8.1</b> Package installation</a></li>
<li class="chapter" data-level="5.8.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#gpu-usage"><i class="fa fa-check"></i><b>5.8.2</b> GPU usage</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#configuring-jupyter-notebook-access"><i class="fa fa-check"></i><b>5.9</b> Configuring Jupyter Notebook Access</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>6</b> Plotting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="plotting.html"><a href="plotting.html#gghighlight-example"><i class="fa fa-check"></i><b>6.1</b> GGHighlight Example</a></li>
<li class="chapter" data-level="6.2" data-path="plotting.html"><a href="plotting.html#coord_flip-factor-orders"><i class="fa fa-check"></i><b>6.2</b> <code>coord_flip()</code> factor orders</a></li>
<li class="chapter" data-level="6.3" data-path="plotting.html"><a href="plotting.html#axis-font-size"><i class="fa fa-check"></i><b>6.3</b> Axis font size</a></li>
<li class="chapter" data-level="6.4" data-path="plotting.html"><a href="plotting.html#shorten-arrows-on-a-dag"><i class="fa fa-check"></i><b>6.4</b> Shorten Arrows on a DAG</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="genomics.html"><a href="genomics.html"><i class="fa fa-check"></i><b>7</b> Genomics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="genomics.html"><a href="genomics.html#single-cell-analysis"><i class="fa fa-check"></i><b>7.1</b> Single Cell Analysis</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="genomics.html"><a href="genomics.html#minimising-the-size-of-a-seurat-object"><i class="fa fa-check"></i><b>7.1.1</b> Minimising the size of a Seurat Object</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="genomics.html"><a href="genomics.html#nextflow"><i class="fa fa-check"></i><b>7.2</b> Nextflow</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="genomics.html"><a href="genomics.html#rnaseq-example-with-sbatch-slurm"><i class="fa fa-check"></i><b>7.2.1</b> RNASeq example with sbatch (slurm)</a></li>
<li class="chapter" data-level="7.2.2" data-path="genomics.html"><a href="genomics.html#dnaseq-example-with-sbatch-slurm"><i class="fa fa-check"></i><b>7.2.2</b> DNASeq example with sbatch (slurm)</a></li>
<li class="chapter" data-level="7.2.3" data-path="genomics.html"><a href="genomics.html#atacseq-example-with-sbatch-slurm"><i class="fa fa-check"></i><b>7.2.3</b> ATACSeq example with sbatch (slurm)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html"><i class="fa fa-check"></i><b>8</b> Programming in rlang</a>
<ul>
<li class="chapter" data-level="8.1" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html#rlang"><i class="fa fa-check"></i><b>8.1</b> rlang</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html#what-is-rlang"><i class="fa fa-check"></i><b>8.1.1</b> What is rlang?</a></li>
<li class="chapter" data-level="8.1.2" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html#dynamic-calling-of-variables-using-dplyr"><i class="fa fa-check"></i><b>8.1.2</b> Dynamic calling of variables using dplyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="server-admin.html"><a href="server-admin.html"><i class="fa fa-check"></i><b>9</b> Server admin</a>
<ul>
<li class="chapter" data-level="9.1" data-path="server-admin.html"><a href="server-admin.html#rstudio-argonaut-and-argosafe"><i class="fa fa-check"></i><b>9.1</b> RStudio (argonaut and argosafe)</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="server-admin.html"><a href="server-admin.html#scheduled-script-cron"><i class="fa fa-check"></i><b>9.1.1</b> Scheduled script (CRON)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="server-admin.html"><a href="server-admin.html#rstudio-connect-argoshare"><i class="fa fa-check"></i><b>9.2</b> RStudio Connect: argoshare</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="server-admin.html"><a href="server-admin.html#delete-user"><i class="fa fa-check"></i><b>9.2.1</b> Delete user</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="server-admin.html"><a href="server-admin.html#shiny-server-opensource-setup---uoe-eleanor"><i class="fa fa-check"></i><b>9.3</b> Shiny server opensource setup - UoE Eleanor</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="server-admin.html"><a href="server-admin.html#setting-up-ubuntu-instance"><i class="fa fa-check"></i><b>9.3.1</b> Setting up Ubuntu Instance</a></li>
<li class="chapter" data-level="9.3.2" data-path="server-admin.html"><a href="server-admin.html#install-nginx"><i class="fa fa-check"></i><b>9.3.2</b> Install Nginx</a></li>
<li class="chapter" data-level="9.3.3" data-path="server-admin.html"><a href="server-admin.html#installing-r"><i class="fa fa-check"></i><b>9.3.3</b> Installing R</a></li>
<li class="chapter" data-level="9.3.4" data-path="server-admin.html"><a href="server-admin.html#installing-shiny-server"><i class="fa fa-check"></i><b>9.3.4</b> Installing Shiny Server</a></li>
<li class="chapter" data-level="9.3.5" data-path="server-admin.html"><a href="server-admin.html#installing-other-linux-packages"><i class="fa fa-check"></i><b>9.3.5</b> Installing other Linux packages</a></li>
<li class="chapter" data-level="9.3.6" data-path="server-admin.html"><a href="server-admin.html#installing-r-packages"><i class="fa fa-check"></i><b>9.3.6</b> Installing R packages</a></li>
<li class="chapter" data-level="9.3.7" data-path="server-admin.html"><a href="server-admin.html#loading-your-app"><i class="fa fa-check"></i><b>9.3.7</b> Loading your app</a></li>
<li class="chapter" data-level="9.3.8" data-path="server-admin.html"><a href="server-admin.html#make-your-app-the-default-index-page"><i class="fa fa-check"></i><b>9.3.8</b> Make your app the default index page</a></li>
<li class="chapter" data-level="9.3.9" data-path="server-admin.html"><a href="server-admin.html#getting-a-user-friendly-domain-name"><i class="fa fa-check"></i><b>9.3.9</b> Getting a user-friendly domain name</a></li>
<li class="chapter" data-level="9.3.10" data-path="server-admin.html"><a href="server-admin.html#appendix-1-password-protecting-your-site"><i class="fa fa-check"></i><b>9.3.10</b> Appendix 1 – Password protecting your site</a></li>
<li class="chapter" data-level="9.3.11" data-path="server-admin.html"><a href="server-admin.html#appendix-2-setting-up-a-swap-file"><i class="fa fa-check"></i><b>9.3.11</b> APPENDIX 2 – Setting up a swap file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="redcap.html"><a href="redcap.html"><i class="fa fa-check"></i><b>10</b> REDCap</a>
<ul>
<li class="chapter" data-level="10.1" data-path="redcap.html"><a href="redcap.html#api-pull"><i class="fa fa-check"></i><b>10.1</b> API pull</a></li>
<li class="chapter" data-level="10.2" data-path="redcap.html"><a href="redcap.html#applying-a-redcap-factoring-script"><i class="fa fa-check"></i><b>10.2</b> Applying a REDCap factoring script</a></li>
<li class="chapter" data-level="10.3" data-path="redcap.html"><a href="redcap.html#alternative-to-the-factoring-script-redcap_label-from-librarycollaboratorr"><i class="fa fa-check"></i><b>10.3</b> Alternative to the factoring script: <code>redcap_label()</code> from <code>library(collaboratorR)</code></a></li>
<li class="chapter" data-level="10.4" data-path="redcap.html"><a href="redcap.html#scannable-barcodes-in-redcap"><i class="fa fa-check"></i><b>10.4</b> Scannable barcodes in REDCap</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html"><i class="fa fa-check"></i><b>11</b> Working with digital pathology data and python</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#installing-openslide"><i class="fa fa-check"></i><b>11.1</b> Installing OpenSlide</a></li>
<li class="chapter" data-level="11.2" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#using-openslide"><i class="fa fa-check"></i><b>11.2</b> Using OpenSlide</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#opening-a-slide-and-inspecting-properties"><i class="fa fa-check"></i><b>11.2.1</b> Opening a slide and inspecting properties</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#whole-workflow"><i class="fa fa-check"></i><b>11.3</b> Whole workflow</a></li>
<li class="chapter" data-level="11.4" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#using-python-and-r-together"><i class="fa fa-check"></i><b>11.4</b> Using python and R together</a></li>
<li class="chapter" data-level="11.5" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#handling-errors-in-python"><i class="fa fa-check"></i><b>11.5</b> Handling errors in python</a></li>
<li class="chapter" data-level="11.6" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#iterating-over-many-many-slide-files"><i class="fa fa-check"></i><b>11.6</b> Iterating over many many slide files</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html"><i class="fa fa-check"></i><b>12</b> Citations with R Markdown</a>
<ul>
<li class="chapter" data-level="12.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#zotero-set-up"><i class="fa fa-check"></i><b>12.1</b> Zotero Set-up</a></li>
<li class="chapter" data-level="12.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#file-storage-set-up"><i class="fa fa-check"></i><b>12.2</b> File Storage Set-up</a></li>
<li class="chapter" data-level="12.3" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#folder-set-up"><i class="fa fa-check"></i><b>12.3</b> Folder Set-up</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#storing-pdfs"><i class="fa fa-check"></i><b>12.3.1</b> Storing PDFs</a></li>
<li class="chapter" data-level="12.3.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#storing-bibliographies"><i class="fa fa-check"></i><b>12.3.2</b> Storing Bibliographies</a></li>
<li class="chapter" data-level="12.3.3" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#subfolder-for-references"><i class="fa fa-check"></i><b>12.3.3</b> Subfolder for References</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#configuring-zotero"><i class="fa fa-check"></i><b>12.4</b> Configuring Zotero</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#zotfile-pdf-preferences"><i class="fa fa-check"></i><b>12.4.1</b> ZotFile PDF Preferences</a></li>
<li class="chapter" data-level="12.4.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#general-zotero-settings"><i class="fa fa-check"></i><b>12.4.2</b> General Zotero Settings</a></li>
<li class="chapter" data-level="12.4.3" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#refresh-bibtex-citation-key"><i class="fa fa-check"></i><b>12.4.3</b> Refresh BibTex Citation Key</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#generating-a-.bib-file"><i class="fa fa-check"></i><b>12.5</b> Generating a .bib File</a></li>
<li class="chapter" data-level="12.6" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#linking-dropbox-and-rstudio-server"><i class="fa fa-check"></i><b>12.6</b> Linking DropBox and Rstudio Server</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#token-creation"><i class="fa fa-check"></i><b>12.6.1</b> Token Creation</a></li>
<li class="chapter" data-level="12.6.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#dropbox-linkage"><i class="fa fa-check"></i><b>12.6.2</b> DropBox Linkage</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#citing-r-packages"><i class="fa fa-check"></i><b>12.7</b> Citing R Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Surgical Informatics Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transfer-and-eddie" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Data Transfer and Eddie<a href="data-transfer-and-eddie.html#data-transfer-and-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Often it is necessary to transfer data into and out of RStudio server. This can be done from personal laptops (as long as you have permission for the data!), university supported desktops, Eddie and a number of other devices or servers.</p>
<div id="uploading-and-downloading-data-the-easy-way" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Uploading and Downloading Data the Easy Way<a href="data-transfer-and-eddie.html#uploading-and-downloading-data-the-easy-way" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Often the GUI in RStudio is sufficient. In the <code>Files</code> pane click upload to move data from your current computer into RStudio server. To download select the file and then click <code>More &gt; Export</code>. As always this should be done only when appropriate.</p>
<p>Sometimes this isn’t possible either with large files or files stored remotely on other servers such as Eddie.</p>
</div>
<div id="alternative-methods-when-the-easy-way-wont-work" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Alternative Methods when the Easy Way won’t work<a href="data-transfer-and-eddie.html#alternative-methods-when-the-easy-way-wont-work" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="what-is-eddie" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> What is Eddie?<a href="data-transfer-and-eddie.html#what-is-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Eddie Mark 3 is the third iteration of the University’s compute cluster and is available to all University of Edinburgh researchers. It consists of some 7000 Intel® Xeon® cores with up to 3 TB of memory available per compute node.</p>
<p>The surgical informatics group has a shared folder in the Eddie cluster which can be accessed to store data and perform analyses which might be too large or complex for RStudio server. Every task in Eddie is controlled through the command line interface - those familiar with Linux/Unix will be familiar with this.</p>
</div>
</div>
<div id="using-the-command-line" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Using the Command Line<a href="data-transfer-and-eddie.html#using-the-command-line" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes the command line is the only possible way to copy data to and from RStudio server. Argonaut and Argosafe are <code>SSH</code>-enabled (Secure SHell) meaning that you can securely copy data to and from them using the command line editor on another device. It is also possible to use the RStudio terminal to copy to another device or server that is <code>SSH</code>-enabled although this isn’t currently recommended due to issues with RStudio server’s websockets (when you type in the terminal you have to do so very slowly for characters to appear in the right order or you have to use a script - described below).</p>
<p>First, if you don’t have a command line editor or SSH client installed (often the case for earlier Windows versions although there is talk of a native client becoming default) then you will need to install one. For working on a Windows device generally PuTTY is the recommended SSH client (allows you connect to other servers) and a reasonable command line editor to work with files on the local device is GitBash.</p>
<div id="downloads-and-setup---eddie-example" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Downloads and Setup - Eddie Example<a href="data-transfer-and-eddie.html#downloads-and-setup---eddie-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Make sure you have the University VPN downloaded for your own computer to access Eddie if needed. The link is at: <a href="https://www.ed.ac.uk/information-services/computing/desktop-personal/vpn/vpn-service-using" class="uri">https://www.ed.ac.uk/information-services/computing/desktop-personal/vpn/vpn-service-using</a>. It is the Cisco Connect Any Client which logs into the VPN (the password should be different to your EASE password).<br />
</li>
<li>Download the PuTTY terminal software: <a href="https://www.putty.org/" class="uri">https://www.putty.org/</a>.</li>
</ol>
<p>Open up PuTTY and you will see a configuration screen. On this screen make sure to enter <code>eddie.ecdf.ed.ac.uk</code> into the box and tick SSH as your method for connection. The PuTTY terminal will launch (assuming you are connected to the University VPN already) and ask <code>login as</code> at which point you should enter your EASE username. You will then be asked for your EASE password and you should now see that you are logged into Eddie.</p>
<p>If you are logging in from RStudio Server or another terminal software you should enter on the command line:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb116-1"><a href="data-transfer-and-eddie.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="op">&lt;</span>UUN<span class="op">&gt;</span>@eddie.ecdf.ed.ac.uk</span></code></pre></div>
<p><UUN> is your university username for EASE. You will then be asked for your password.</p>
<p>More information on Eddie basics can also be found at: <a href="https://www.wiki.ed.ac.uk/display/ResearchServices/Quickstart" class="uri">https://www.wiki.ed.ac.uk/display/ResearchServices/Quickstart</a>.</p>
</div>
<div id="copy-and-paste-with-putty" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Copy and Paste with PuTTY<a href="data-transfer-and-eddie.html#copy-and-paste-with-putty" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Like many other command line interfaces PuTTY can be made to work more easily with copy and paste. This is done simply through highlighting and clicking and not with traditional <code>ctrl-c</code> and <code>ctrl-v</code> commands like typical word processors.</p>
<p><strong>To copy text from PuTTY</strong>: Highlight the text. That’s it! No need to click anything or type / press anything, highlighting is enough. You can then paste the text elsewhere.</p>
<p><strong>To copy text into PuTTY</strong>: Once you’ve copied text (either by highlighting in PuTTY itself or by using <code>ctrl-c</code> in another programme, just right-click. The text will appear at the command line. If you copy several lines separated by <code>\newline</code> then PuTTY will run each line up until the last one copied and leave the last line at the command line (if you highlight large sections of text in PuTTY and right-click it will try to run all of them).</p>
</div>
<div id="closing-a-session-in-putty" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Closing a Session in PuTTY<a href="data-transfer-and-eddie.html#closing-a-session-in-putty" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To close a session use <code>ctrl-d</code>.</p>
</div>
<div id="eddie-file-structure" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Eddie File Structure<a href="data-transfer-and-eddie.html#eddie-file-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once you have logged into Eddie there are several directories (folders/places) where you can store and manipulate files. Moving between these directories is usually done using the <code>cd</code> command. The same idea is applicable to your own machine</p>
<p>When you first log in you will default to your home directory. In order to see the “path” to that directory enter the command:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb117-1"><a href="data-transfer-and-eddie.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="bu">pwd</span></span></code></pre></div>
<p>The terminal should print out something like:</p>
<pre><code>/home/&lt;UUN&gt;</code></pre>
<p>To get back to this directory at any point enter one of the following (they are both equivalent):</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb119-1"><a href="data-transfer-and-eddie.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /home/<span class="op">&lt;</span>UUN<span class="op">&gt;</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb120-1"><a href="data-transfer-and-eddie.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~</span></code></pre></div>
<p>When inside your home folder to see any of the files or subdirectories in your home directory enter:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb121-1"><a href="data-transfer-and-eddie.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-a</span></span></code></pre></div>
<p>The <code>-a</code> argument to ls shows hidden files which begin with a <code>.</code> such as <code>.Renviron</code> if you have created this. There are several other arguments which can be passed to ls such as <code>-l</code> which will should the permissions for the file or subdirectory. When using the <code>-l</code> argument the files start with <code>-</code> and are followed by 7 characters or <code>-</code> which explain whether different groups of people can write, read or execute the files. The first three are for the file owner, the next three for the group and the next three for any else with access to the directory. For example the following printed after running <code>ls -l</code> would indicate that the owner could read, write and execute a file, the group could read and execute it and that others could only read it:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb122-1"><a href="data-transfer-and-eddie.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="ex">-rwxr-xr--</span> ... ... ... ... my_file.txt</span></code></pre></div>
</div>
</div>
<div id="copying-data-from-eddie-into-rstudio-server" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Copying Data from Eddie into RStudio server<a href="data-transfer-and-eddie.html#copying-data-from-eddie-into-rstudio-server" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="method-1-using-putty-or-another-terminalshell-connected-to-eddie" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Method 1: Using PuTTY (or another terminal/shell connected to Eddie)<a href="data-transfer-and-eddie.html#method-1-using-putty-or-another-terminalshell-connected-to-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To copy data from another server or device into RStudio Server use the following code in the command line editor (e.g. PuTTY, GitBash etc.):</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb123-1"><a href="data-transfer-and-eddie.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="op">&lt;</span>file_path_on_other_device_or_server<span class="op">&gt;</span>new_file.txt <span class="op">&lt;</span>RStudio_Server_Username<span class="op">&gt;</span>@argonaut.is.ed.ac.uk:<span class="op">&lt;</span>RStudio_path<span class="op">&gt;</span>/<span class="op">&lt;</span>project_directory<span class="op">&gt;</span>/</span></code></pre></div>
<p>You will be asked for your RStudio server (Argonaut etc.) password. If you are unsure of the file path enter <code>pwd</code> when you are working in the directory with the file before copying and pasting.</p>
<p>If you are not sure of the path to the directory in which you wish to copy the data to or from then use <code>getwd()</code> in RStudio when inside the project you wish to copy to (you many need to add a subdirectory folder to the <code>getwd()</code> output if you are using subdirectories in your RStudio projects).</p>
<p>The <code>scp</code> command will work with Argonaut and Argosafe as the ability to allow SSH connections has been activated. This may need to be established separately for other RStudio servers within the department.</p>
</div>
<div id="method-2-using-the-rstudio-server-terminal" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Method 2: Using the RStudio Server Terminal<a href="data-transfer-and-eddie.html#method-2-using-the-rstudio-server-terminal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To use the RStudio server terminal to copy data in and out of Eddie do not SSH into Eddie as described above but instead use the <code>scp</code> command. If you are using RStudio’s terminal for accessing Eddie instead of PuTTY or something equivalent then you will need to either temporarily disconnect from Eddie (<code>ctrl-d</code>) or open a new terminal if using RStudio server Pro which allows multiple terminals.</p>
<p>In the terminal enter the following command to copy a single file from Eddie into RStudio server from a project subdirectory in the SurgInfGrp directory:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb124-1"><a href="data-transfer-and-eddie.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="op">&lt;</span>UUN<span class="op">&gt;</span>@eddie.ecdf.ed.ac.uk:/exports/cmvm/eddie/edmed/groups/SurgInfGrp/<span class="op">&lt;</span>project_subdirectory<span class="op">&gt;</span>/my_file.txt /home/<span class="op">&lt;</span>RStudio_Server_Username<span class="op">&gt;</span>/<span class="op">&lt;</span>RStudio_Project<span class="op">&gt;</span>/</span>
<span id="cb124-2"><a href="data-transfer-and-eddie.html#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="data-transfer-and-eddie.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Or adapt to copy entire directory contents (drop the * to copy the directory/folder as well as the contents)</span></span>
<span id="cb124-4"><a href="data-transfer-and-eddie.html#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="at">-r</span> <span class="op">&lt;</span>UUN<span class="op">&gt;</span>@eddie.ecdf.ed.ac.uk:/exports/cmvm/eddie/edmed/groups/SurgInfGrp/<span class="op">&lt;</span>project_subdirectory<span class="op">&gt;</span>/<span class="pp">*</span> /home/<span class="op">&lt;</span>RStudio_Server_Username<span class="op">&gt;</span>/<span class="op">&lt;</span>RStudio_Project<span class="op">&gt;</span>/</span></code></pre></div>
<p>On entering the command to the terminal you will be asked to enter your EASE password (type this slowly if using RStudio Server Pro prior to web sockets issue being fixed). In order to move data in the other direction simply change the order of the file paths.</p>
</div>
</div>
<div id="group-folders-on-eddie-and-datastore" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Group Folders on Eddie and DataStore<a href="data-transfer-and-eddie.html#group-folders-on-eddie-and-datastore" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use the <code>quota</code> command to check your disk space, this will include the shared space, e.g., :</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb125-1"><a href="data-transfer-and-eddie.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[rots@login03</span><span class="er">(</span><span class="ex">eddie</span><span class="kw">)</span> <span class="ex">~]$</span> quota</span>
<span id="cb125-2"><a href="data-transfer-and-eddie.html#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="data-transfer-and-eddie.html#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="ex">----------------------------------------------------------------</span></span>
<span id="cb125-4"><a href="data-transfer-and-eddie.html#cb125-4" aria-hidden="true" tabindex="-1"></a>                 <span class="ex">DISK</span> QUOTA AND USAGE</span>
<span id="cb125-5"><a href="data-transfer-and-eddie.html#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/home/rots:</span></span>
<span id="cb125-6"><a href="data-transfer-and-eddie.html#cb125-6" aria-hidden="true" tabindex="-1"></a>     <span class="ex">84.62</span> MB of 10240.00 MB <span class="er">(</span><span class="ex">.82%</span><span class="kw">)</span> <span class="ex">used</span></span>
<span id="cb125-7"><a href="data-transfer-and-eddie.html#cb125-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-8"><a href="data-transfer-and-eddie.html#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/exports/eddie/scratch/rots:</span></span>
<span id="cb125-9"><a href="data-transfer-and-eddie.html#cb125-9" aria-hidden="true" tabindex="-1"></a>     <span class="ex">0</span> GB of 2048.00 GB <span class="er">(</span><span class="ex">0%</span><span class="kw">)</span> <span class="ex">used</span></span>
<span id="cb125-10"><a href="data-transfer-and-eddie.html#cb125-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-11"><a href="data-transfer-and-eddie.html#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="ex">/exports/cmvm/eddie/edmed/groups/SurgInfGrp:</span></span>
<span id="cb125-12"><a href="data-transfer-and-eddie.html#cb125-12" aria-hidden="true" tabindex="-1"></a>     <span class="ex">918.89</span> GB of 3072.00 GB <span class="er">(</span><span class="ex">29.91%</span><span class="kw">)</span> <span class="ex">used</span></span>
<span id="cb125-13"><a href="data-transfer-and-eddie.html#cb125-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-14"><a href="data-transfer-and-eddie.html#cb125-14" aria-hidden="true" tabindex="-1"></a><span class="ex">----------------------------------------------------------------</span></span></code></pre></div>
<p>To get to the Surgical Informatics shared group directory enter:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb126-1"><a href="data-transfer-and-eddie.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /exports/cmvm/eddie/edmed/groups/SurgInfGrp</span></code></pre></div>
<p>If you don’t have access then Riinu or Ewen can provide this as they have admin rights.</p>
<p>This directory should be the place to store any group projects or apps or other files which are somewhat (but not very) large.</p>
<p>The group space should be used to store bulk files which can be staged into Eddie for an active session but will not be permanently stored in Eddie. Consider storing your files on DataStore or other services for longer term needs. DataStore can be checked from the quota.txt file that’s in the main folder.</p>
<div id="the-scratch-space" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> The Scratch Space<a href="data-transfer-and-eddie.html#the-scratch-space" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your own personal scratch space is where you should work on active projects during a session after staging them in from the datastore and/or shared Surgical Informatics group directory. The scratch space has 2TB of storage per user but this is cleaned up after one month. This means large datasets can be analysed here but not stored in the long-term. To find your own personal scratch space enter:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb127-1"><a href="data-transfer-and-eddie.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /exports/eddie/scratch/<span class="op">&lt;</span>UUN<span class="op">&gt;</span></span></code></pre></div>
<p>Finally there is also a temporary directory ($TMPDIR) which is only present and accessible whilst a job is running in Eddie. This has 1TB of available storage.</p>
</div>
<div id="datastore" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> DataStore<a href="data-transfer-and-eddie.html#datastore" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Our shared DataStore folder is at:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb128-1"><a href="data-transfer-and-eddie.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/exports/cmvm/datastore/edmed/groups/SurgInfGrp</span></span></code></pre></div>
<p>It should be mounted in argosafe at /home/common.</p>
</div>
<div id="running-eddie-from-rstudio-server" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Running Eddie from RStudio Server<a href="data-transfer-and-eddie.html#running-eddie-from-rstudio-server" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is possible to log in to Eddie from RStudio server and use Shell Scripts stored in RStudio to perform tasks in Eddie. This may be helpful if you plan to modify shell scripts a lot and want to have the benefit of the RStudio interface. <code>ctrl-alt-enter</code> sends data to the terminal in the same way that it would the console without the <code>alt</code>.</p>
<p>To connect initially enter:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb129-1"><a href="data-transfer-and-eddie.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="op">&lt;</span>UUN<span class="op">&gt;</span>@eddie.ecdf.ed.ac.uk</span></code></pre></div>
<p>You will then be asked for your password which has to be typed (currently slowly and carefully!) into the terminal. Afterwards you can send any commands from a script using <code>ctrl-alt-enter</code>. This will not work with <code>Rmd</code> or <code>notebooks</code>.</p>
</div>
<div id="modules-applications-in-eddie" class="section level3 hasAnchor" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> Modules (Applications) in Eddie<a href="data-transfer-and-eddie.html#modules-applications-in-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Eddie has several modules (applications) which can be run such as R, python, cuda, java, intel, fastqc etc. etc. The best way to see which modules you have available is to run <code>module avail</code>. To see which modules are loaded is to run <code>module list</code>.</p>
<p>To load in a new module to use run the following:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb130-1"><a href="data-transfer-and-eddie.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb130-2"><a href="data-transfer-and-eddie.html#cb130-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-3"><a href="data-transfer-and-eddie.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="co"># For example:</span></span>
<span id="cb130-4"><a href="data-transfer-and-eddie.html#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load R/3.5.3</span>
<span id="cb130-5"><a href="data-transfer-and-eddie.html#cb130-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-6"><a href="data-transfer-and-eddie.html#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the default R version is 3.3.2 (as of 13th June 2019) and is loaded using:</span></span>
<span id="cb130-7"><a href="data-transfer-and-eddie.html#cb130-7" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load R</span></code></pre></div>
<p>Once you have loaded modules that you will need for your analysis you may need to create new files or establish a library of packages for those modules. There are a default set of packages available for R when loaded from either the main applications library or from other installations on the IGMM paths but these are read-only meaning that for any customisation and installation of new packages, a separate library must be maintained and that the R options must be amended to point to this library. This can be done by creating a personal <code>.Rprofile</code> file in your home directory in Eddie which points to the Surgical Informatics Group Rlibrary.</p>
<p>It is not advised to create a separate library in your own Eddie space as this will quickly use up your disc quota. Theoretically a separate installation of a package could be stored in your own space if working on developer edition or github branch / fork of a package.</p>
</div>
<div id="working-with-r-in-eddie" class="section level3 hasAnchor" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> Working with R in Eddie<a href="data-transfer-and-eddie.html#working-with-r-in-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="rprofile-file" class="section level4 hasAnchor" number="5.5.5.1">
<h4><span class="header-section-number">5.5.5.1</span> .Rprofile File<a href="data-transfer-and-eddie.html#rprofile-file" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When you load up R an <code>.Rprofile</code> file is sourced and anything contained within the file will be run for the current R session. This is particularly useful in Eddie because the defaults are not very helpful:</p>
<ul>
<li>The R package library is the Eddie default library which cannot be added to</li>
<li>The CRAN mirror is not specified so every session will ask you to select a new CRAN mirror to install packages in a temporary library</li>
</ul>
<p>The <code>.Rprofile</code> file also has other options which can be customised to improve how your current R session will run on Eddie. There are a number of possible customisations but be careful as not all are helpful if you end up collaborating with other research teams, some of these customisations such as <code>stringsAsFactors=FALSE</code> by default could be used in a project-specific <code>.Rprofile</code> file with caution but if you are working with another research group who rely on <code>read.csv</code> and have scripts established which assume that all strings are factors then having that customisation in your home directory may generate bugs when collaborating on projects.</p>
<p>R will automatically look for a <code>.Rprofile</code> file when R is started during each Eddie session and will look for this file in three places with an order of preference. The first place is the current working directory of a project so an <code>.Rprofile</code> file could be stored here to generate very specific customisations for a project if necessary. The next place it will look is in your own home directory (<code>/home/&lt;UUN&gt;/</code> or <code>/~/</code>), this is where you should create a <code>.Rprofile</code> file which will be your default for all sessions, it is recommended to use this sparingly but that certain key features are used such as setting up your main library location as the Surgical Informatics Group and setting up a default CRAN mirror e.g. the RStudio CRAN mirror. Finally, if there is not a <code>.Rprofile</code> file here then R will attempt to source a file in the R home directory (found in R using <code>.R.home()</code>) and if there is no file here then no customisation will occur. Some servers also have a <code>.Rprofile.site</code> file although this is not currently present in Eddie.</p>
<p><em>Important</em>: Always leave the final line of an <code>.Rprofile</code> file blank.</p>
<p>A possible <code>.Rprofile</code> file for using in Eddie as part of the Surgical Informatics Group is:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="data-transfer-and-eddie.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Rprofile template</span></span>
<span id="cb131-2"><a href="data-transfer-and-eddie.html#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="data-transfer-and-eddie.html#cb131-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-4"><a href="data-transfer-and-eddie.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Stop being asked for CRAN mirror every time</span></span>
<span id="cb131-5"><a href="data-transfer-and-eddie.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="st">&quot;repos&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">&quot;http://cran.rstudio.com/&quot;</span>))</span>
<span id="cb131-6"><a href="data-transfer-and-eddie.html#cb131-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-7"><a href="data-transfer-and-eddie.html#cb131-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-8"><a href="data-transfer-and-eddie.html#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Change the default editor to nano</span></span>
<span id="cb131-9"><a href="data-transfer-and-eddie.html#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">editor=</span><span class="st">&quot;nano&quot;</span>)</span>
<span id="cb131-10"><a href="data-transfer-and-eddie.html#cb131-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-11"><a href="data-transfer-and-eddie.html#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Change the terminal prompt to make it clear R is loaded</span></span>
<span id="cb131-12"><a href="data-transfer-and-eddie.html#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">prompt=</span><span class="st">&quot;R &gt; &quot;</span>)</span>
<span id="cb131-13"><a href="data-transfer-and-eddie.html#cb131-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-14"><a href="data-transfer-and-eddie.html#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Prevent default saving of workspace image (similar to recommended RStudio server settings)</span></span>
<span id="cb131-15"><a href="data-transfer-and-eddie.html#cb131-15" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">save=</span><span class="st">&quot;no&quot;</span>, ...) {</span>
<span id="cb131-16"><a href="data-transfer-and-eddie.html#cb131-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">quit</span>(<span class="at">save=</span>save, ...)</span>
<span id="cb131-17"><a href="data-transfer-and-eddie.html#cb131-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb131-18"><a href="data-transfer-and-eddie.html#cb131-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-19"><a href="data-transfer-and-eddie.html#cb131-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-20"><a href="data-transfer-and-eddie.html#cb131-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Clever code to allow tab-completion of package names used in library()</span></span>
<span id="cb131-21"><a href="data-transfer-and-eddie.html#cb131-21" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">rc.settings</span>(<span class="at">ipck=</span><span class="cn">TRUE</span>)</span>
<span id="cb131-22"><a href="data-transfer-and-eddie.html#cb131-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-23"><a href="data-transfer-and-eddie.html#cb131-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-24"><a href="data-transfer-and-eddie.html#cb131-24" aria-hidden="true" tabindex="-1"></a><span class="do">## Add some colour to the console if colourout is available</span></span>
<span id="cb131-25"><a href="data-transfer-and-eddie.html#cb131-25" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">Sys.Getenv</span>(<span class="st">&quot;TERM&quot;</span>) <span class="sc">==</span> <span class="st">&quot;xterm-256color&quot;</span>)</span>
<span id="cb131-26"><a href="data-transfer-and-eddie.html#cb131-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">library</span>(<span class="st">&quot;colorout&quot;</span>)</span>
<span id="cb131-27"><a href="data-transfer-and-eddie.html#cb131-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-28"><a href="data-transfer-and-eddie.html#cb131-28" aria-hidden="true" tabindex="-1"></a><span class="do">## Create a new envisible environment which can be used to create new functions</span></span>
<span id="cb131-29"><a href="data-transfer-and-eddie.html#cb131-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Benefit of this is that all new functions here are hidden in environment and not rmeoved by rm(list = ls())</span></span>
<span id="cb131-30"><a href="data-transfer-and-eddie.html#cb131-30" aria-hidden="true" tabindex="-1"></a>.env <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb131-31"><a href="data-transfer-and-eddie.html#cb131-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-32"><a href="data-transfer-and-eddie.html#cb131-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-33"><a href="data-transfer-and-eddie.html#cb131-33" aria-hidden="true" tabindex="-1"></a><span class="do">## Set library path to make sure packages are loaded from SurgInfGrp</span></span>
<span id="cb131-34"><a href="data-transfer-and-eddie.html#cb131-34" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>(<span class="st">&quot;/exports/cmvm/eddie/edmed/groups/SurgInfGrp/R/Rlibrary&quot;</span>)</span>
<span id="cb131-35"><a href="data-transfer-and-eddie.html#cb131-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-36"><a href="data-transfer-and-eddie.html#cb131-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-37"><a href="data-transfer-and-eddie.html#cb131-37" aria-hidden="true" tabindex="-1"></a><span class="do">## If working on a particular project e.g. the gwas_pipeline from IGMM best to create a new library due to R version issues in that project</span></span>
<span id="cb131-38"><a href="data-transfer-and-eddie.html#cb131-38" aria-hidden="true" tabindex="-1"></a><span class="do">## Just copy the .Rprofile file from your own home directory into the project working directory and edit to change library</span></span>
<span id="cb131-39"><a href="data-transfer-and-eddie.html#cb131-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-40"><a href="data-transfer-and-eddie.html#cb131-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-41"><a href="data-transfer-and-eddie.html#cb131-41" aria-hidden="true" tabindex="-1"></a><span class="do">## Attach all the variables created</span></span>
<span id="cb131-42"><a href="data-transfer-and-eddie.html#cb131-42" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(.env)</span>
<span id="cb131-43"><a href="data-transfer-and-eddie.html#cb131-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-44"><a href="data-transfer-and-eddie.html#cb131-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-45"><a href="data-transfer-and-eddie.html#cb131-45" aria-hidden="true" tabindex="-1"></a><span class="do">## Remember that an .Rprofile file always silently ignores the last line so don&#39;t forget to leave empty newlines</span></span></code></pre></div>
<p>The above configuration should generate minimal portability issues when working on other projects.</p>
<p>There are a few explanations of the benefits and side effects of having a <code>.Rprofile</code> file as well as ways to temporarily mask them for specific projects which will be shared with other collaborators in this blog post: <a href="https://www.r-bloggers.com/fun-with-Rprofile-and-customizing-r-startup/" class="uri">https://www.r-bloggers.com/fun-with-Rprofile-and-customizing-r-startup/</a>.</p>
<p>Should you wish to have an entire directory of startup files (e.g. one file for CRAN, one file for library, one file for custom function etc. etc.) so that segments of the customisation can be shared quickly without modifying / dropping all of the other elements of the <code>.Rprofile</code> file then this is described here: <a href="https://cran.r-project.org/web/packages/startup/vignettes/startup-intro.html" class="uri">https://cran.r-project.org/web/packages/startup/vignettes/startup-intro.html</a>. This relies on the <code>startup</code> package. Other options such as having secure directories with GitHub tokens and other content which is protected from access by other Eddie users is also discussed there.</p>
</div>
<div id="creating-an-.rprofile-file" class="section level4 hasAnchor" number="5.5.5.2">
<h4><span class="header-section-number">5.5.5.2</span> Creating an .Rprofile File<a href="data-transfer-and-eddie.html#creating-an-.rprofile-file" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When you first use Eddie there will not be any <code>.Rprofile</code> file generated by default and a blank file will need to be created. This can be done by entering the following into the terminal after loading R. To load R enter <code>module load R/3.5.3</code> (or the currently available R versions seen on <code>module avail</code>) into the terminal followed by <code>R</code>. This will start an active R session. Then enter the following code (please do not change the path to the shared group folder! If you need to change the path to a project be sure to include the subdirectory otherwise R will use your <code>.Rprofile</code> file for all SurgInfGrp users which won’t be popular):</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data-transfer-and-eddie.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.create</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)</span></code></pre></div>
<p>This will create a blank <code>.Rprofile</code> file in your home directory on Eddie which should be edited to customise the R configuration.</p>
<p>In order to edit the file it is suggested that you use the nano Unix-based editor. Firstly quit the current R session as that has not yet been configured to use the editor. Enter <code>q()</code> as you would normally do when closing R and enter <code>n</code> if asked about saving workspace image.</p>
<p>Navigagte to your home directory and using <code>ls -a</code> you should see the <code>.Rprofile</code> file which is currently blank.</p>
</div>
<div id="renviron-file" class="section level4 hasAnchor" number="5.5.5.3">
<h4><span class="header-section-number">5.5.5.3</span> .Renviron File<a href="data-transfer-and-eddie.html#renviron-file" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In addition to changing the <code>.Rprofile</code> file you will most likely need to change the <code>.Renviron</code> file. The default for this is probably located in the R home directory which may be <code>/exports/applications/apps/SL7/R/3.5.3/lib64/R/etc/</code>. The <code>.Renviron</code> file is searched for in the same order by R as the <code>.Rprofile</code> file with R first aiming to find the file in the project directory and if not able to find it there looking in the user home directory and finally looking to the R home directory. To copy the <code>Renviron</code> file in the R home directory into a <code>.Renviron</code> file in your home directory enter the following code in the terminal:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb133-1"><a href="data-transfer-and-eddie.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path will need edited if future installations of R replace 3.5.3</span></span>
<span id="cb133-2"><a href="data-transfer-and-eddie.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> /exports/applications/apps/SL7/R/3.5.3/lib64/R/etc/Renviron ~/.Renviron</span></code></pre></div>
<p>The following is a reasonable starting point for the <code>.Renviron</code> file in your own profile:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data-transfer-and-eddie.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="do">### etc/Renviron.  Generated from Renviron.in by configure.</span></span>
<span id="cb134-2"><a href="data-transfer-and-eddie.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="do">###</span></span>
<span id="cb134-3"><a href="data-transfer-and-eddie.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="do">### ${R_HOME}/etc/Renviron</span></span>
<span id="cb134-4"><a href="data-transfer-and-eddie.html#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="do">###</span></span>
<span id="cb134-5"><a href="data-transfer-and-eddie.html#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="do">### Record R system environment variables.</span></span>
<span id="cb134-6"><a href="data-transfer-and-eddie.html#cb134-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-7"><a href="data-transfer-and-eddie.html#cb134-7" aria-hidden="true" tabindex="-1"></a>R_PLATFORM<span class="ot">=</span><span class="er">$</span>{R_PLATFORM<span class="sc">-</span><span class="st">&#39;x86_64-pc-linux-gnu&#39;</span>}</span>
<span id="cb134-8"><a href="data-transfer-and-eddie.html#cb134-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Default printer paper size: first record if user set R_PAPERSIZE</span></span>
<span id="cb134-9"><a href="data-transfer-and-eddie.html#cb134-9" aria-hidden="true" tabindex="-1"></a>R_PAPERSIZE_USER<span class="ot">=</span><span class="er">$</span>{R_PAPERSIZE}</span>
<span id="cb134-10"><a href="data-transfer-and-eddie.html#cb134-10" aria-hidden="true" tabindex="-1"></a>R_PAPERSIZE<span class="ot">=</span><span class="er">$</span>{R_PAPERSIZE<span class="sc">-</span><span class="st">&#39;a4&#39;</span>}</span>
<span id="cb134-11"><a href="data-transfer-and-eddie.html#cb134-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Default print command</span></span>
<span id="cb134-12"><a href="data-transfer-and-eddie.html#cb134-12" aria-hidden="true" tabindex="-1"></a>R_PRINTCMD<span class="ot">=</span><span class="er">$</span>{R_PRINTCMD<span class="sc">-</span><span class="st">&#39;&#39;</span>}</span>
<span id="cb134-13"><a href="data-transfer-and-eddie.html#cb134-13" aria-hidden="true" tabindex="-1"></a><span class="co"># for Rd2pdf, reference manual</span></span>
<span id="cb134-14"><a href="data-transfer-and-eddie.html#cb134-14" aria-hidden="true" tabindex="-1"></a>R_RD4PDF<span class="ot">=</span><span class="er">$</span>{R_RD4PDF<span class="sc">-</span><span class="st">&#39;times,hyper&#39;</span>}</span>
<span id="cb134-15"><a href="data-transfer-and-eddie.html#cb134-15" aria-hidden="true" tabindex="-1"></a><span class="do">## used for options(&quot;texi2dvi&quot;)</span></span>
<span id="cb134-16"><a href="data-transfer-and-eddie.html#cb134-16" aria-hidden="true" tabindex="-1"></a>R_TEXI2DVICMD<span class="ot">=</span><span class="er">$</span>{R_TEXI2DVICMD<span class="sc">-</span><span class="er">$</span>{TEXI2DVI<span class="sc">-</span><span class="st">&#39;texi2dvi&#39;</span>}}</span>
<span id="cb134-17"><a href="data-transfer-and-eddie.html#cb134-17" aria-hidden="true" tabindex="-1"></a><span class="do">## used by untar and installing grDevices</span></span>
<span id="cb134-18"><a href="data-transfer-and-eddie.html#cb134-18" aria-hidden="true" tabindex="-1"></a>R_GZIPCMD<span class="ot">=</span><span class="er">$</span>{R_GZIPCMD<span class="sc">-</span><span class="st">&#39;/usr/bin/gzip&#39;</span>}</span>
<span id="cb134-19"><a href="data-transfer-and-eddie.html#cb134-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Default zip/unzip commands</span></span>
<span id="cb134-20"><a href="data-transfer-and-eddie.html#cb134-20" aria-hidden="true" tabindex="-1"></a>R_UNZIPCMD<span class="ot">=</span><span class="er">$</span>{R_UNZIPCMD<span class="sc">-</span><span class="st">&#39;/usr/bin/unzip&#39;</span>}</span>
<span id="cb134-21"><a href="data-transfer-and-eddie.html#cb134-21" aria-hidden="true" tabindex="-1"></a>R_ZIPCMD<span class="ot">=</span><span class="er">$</span>{R_ZIPCMD<span class="sc">-</span><span class="st">&#39;/usr/bin/zip&#39;</span>}</span>
<span id="cb134-22"><a href="data-transfer-and-eddie.html#cb134-22" aria-hidden="true" tabindex="-1"></a>R_BZIPCMD<span class="ot">=</span><span class="er">$</span>{R_BZIPCMD<span class="sc">-</span><span class="st">&#39;/usr/bin/bzip2&#39;</span>}</span>
<span id="cb134-23"><a href="data-transfer-and-eddie.html#cb134-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Default browser</span></span>
<span id="cb134-24"><a href="data-transfer-and-eddie.html#cb134-24" aria-hidden="true" tabindex="-1"></a>R_BROWSER<span class="ot">=</span><span class="er">$</span>{R_BROWSER<span class="sc">-</span><span class="st">&#39;/usr/bin/xdg-open&#39;</span>}</span>
<span id="cb134-25"><a href="data-transfer-and-eddie.html#cb134-25" aria-hidden="true" tabindex="-1"></a><span class="do">## Default pager</span></span>
<span id="cb134-26"><a href="data-transfer-and-eddie.html#cb134-26" aria-hidden="true" tabindex="-1"></a>PAGER<span class="ot">=</span><span class="er">$</span>{PAGER<span class="sc">-</span><span class="st">&#39;/usr/bin/less&#39;</span>}</span>
<span id="cb134-27"><a href="data-transfer-and-eddie.html#cb134-27" aria-hidden="true" tabindex="-1"></a><span class="do">## Default PDF viewer</span></span>
<span id="cb134-28"><a href="data-transfer-and-eddie.html#cb134-28" aria-hidden="true" tabindex="-1"></a>R_PDFVIEWER<span class="ot">=</span><span class="er">$</span>{R_PDFVIEWER<span class="sc">-</span><span class="st">&#39;/usr/bin/xdg-open&#39;</span>}</span>
<span id="cb134-29"><a href="data-transfer-and-eddie.html#cb134-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Used by libtool</span></span>
<span id="cb134-30"><a href="data-transfer-and-eddie.html#cb134-30" aria-hidden="true" tabindex="-1"></a>LN_S<span class="ot">=</span><span class="st">&#39;ln -s&#39;</span></span>
<span id="cb134-31"><a href="data-transfer-and-eddie.html#cb134-31" aria-hidden="true" tabindex="-1"></a>MAKE<span class="ot">=</span><span class="er">$</span>{MAKE<span class="sc">-</span><span class="st">&#39;make&#39;</span>}</span>
<span id="cb134-32"><a href="data-transfer-and-eddie.html#cb134-32" aria-hidden="true" tabindex="-1"></a><span class="do">## Prefer a POSIX-compliant sed on e.g. Solaris</span></span>
<span id="cb134-33"><a href="data-transfer-and-eddie.html#cb134-33" aria-hidden="true" tabindex="-1"></a>SED<span class="ot">=</span><span class="er">$</span>{SED<span class="sc">-</span><span class="st">&#39;/usr/bin/sed&#39;</span>}</span>
<span id="cb134-34"><a href="data-transfer-and-eddie.html#cb134-34" aria-hidden="true" tabindex="-1"></a><span class="do">## Prefer a tar that can automagically read compressed archives</span></span>
<span id="cb134-35"><a href="data-transfer-and-eddie.html#cb134-35" aria-hidden="true" tabindex="-1"></a>TAR<span class="ot">=</span><span class="er">$</span>{TAR<span class="sc">-</span><span class="st">&#39;/usr/bin/gtar&#39;</span>}</span>
<span id="cb134-36"><a href="data-transfer-and-eddie.html#cb134-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-37"><a href="data-transfer-and-eddie.html#cb134-37" aria-hidden="true" tabindex="-1"></a><span class="do">## System and compiler types.</span></span>
<span id="cb134-38"><a href="data-transfer-and-eddie.html#cb134-38" aria-hidden="true" tabindex="-1"></a>R_SYSTEM_ABI<span class="ot">=</span><span class="st">&#39;linux,gcc,gxx,gfortran,?&#39;</span></span>
<span id="cb134-39"><a href="data-transfer-and-eddie.html#cb134-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-40"><a href="data-transfer-and-eddie.html#cb134-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-41"><a href="data-transfer-and-eddie.html#cb134-41" aria-hidden="true" tabindex="-1"></a><span class="do">## Change the default R libraries and directories</span></span>
<span id="cb134-42"><a href="data-transfer-and-eddie.html#cb134-42" aria-hidden="true" tabindex="-1"></a>R_DOC_DIR<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>applications<span class="sc">/</span>apps<span class="sc">/</span>SL7<span class="sc">/</span>R<span class="sc">/</span><span class="dv">3</span>.<span class="fl">5.3</span><span class="sc">/</span>lib64<span class="sc">/</span>R<span class="sc">/</span>doc</span>
<span id="cb134-43"><a href="data-transfer-and-eddie.html#cb134-43" aria-hidden="true" tabindex="-1"></a>R_INCLUDE_DIR<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>applications<span class="sc">/</span>apps<span class="sc">/</span>SL7<span class="sc">/</span>R<span class="sc">/</span><span class="dv">3</span>.<span class="fl">5.3</span><span class="sc">/</span>lib64<span class="sc">/</span>R<span class="sc">/</span>include</span>
<span id="cb134-44"><a href="data-transfer-and-eddie.html#cb134-44" aria-hidden="true" tabindex="-1"></a>R_SHARE_DIR<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>applications<span class="sc">/</span>apps<span class="sc">/</span>SL7<span class="sc">/</span>R<span class="sc">/</span><span class="dv">3</span>.<span class="fl">5.3</span><span class="sc">/</span>lib64<span class="sc">/</span>R<span class="sc">/</span>share</span>
<span id="cb134-45"><a href="data-transfer-and-eddie.html#cb134-45" aria-hidden="true" tabindex="-1"></a>RBIN<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>applications<span class="sc">/</span>apps<span class="sc">/</span>SL7<span class="sc">/</span>R<span class="sc">/</span><span class="dv">3</span>.<span class="fl">5.3</span><span class="sc">/</span>bin</span>
<span id="cb134-46"><a href="data-transfer-and-eddie.html#cb134-46" aria-hidden="true" tabindex="-1"></a>RDIR<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>applications<span class="sc">/</span>apps<span class="sc">/</span>SL7<span class="sc">/</span>R<span class="sc">/</span><span class="dv">3</span>.<span class="fl">5.3</span><span class="sc">/</span><span class="dv">3</span>.<span class="fl">3.3</span></span>
<span id="cb134-47"><a href="data-transfer-and-eddie.html#cb134-47" aria-hidden="true" tabindex="-1"></a>R_LIBS<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>cmvm<span class="sc">/</span>eddie<span class="sc">/</span>edmed<span class="sc">/</span>groups<span class="sc">/</span>SurgInfGrp<span class="sc">/</span>R<span class="sc">/</span>Rlibrary</span>
<span id="cb134-48"><a href="data-transfer-and-eddie.html#cb134-48" aria-hidden="true" tabindex="-1"></a>R_LIBS_SITE<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>cmvm<span class="sc">/</span>eddie<span class="sc">/</span>edmed<span class="sc">/</span>groups<span class="sc">/</span>SurgInfGrp<span class="sc">/</span>R<span class="sc">/</span>Rlibrary</span>
<span id="cb134-49"><a href="data-transfer-and-eddie.html#cb134-49" aria-hidden="true" tabindex="-1"></a>R_LIBS_USER<span class="ot">=</span><span class="er">/</span>exports<span class="sc">/</span>cmvm<span class="sc">/</span>eddie<span class="sc">/</span>edmed<span class="sc">/</span>groups<span class="sc">/</span>SurgInfGrp<span class="sc">/</span>R<span class="sc">/</span>Rlibrary</span>
<span id="cb134-50"><a href="data-transfer-and-eddie.html#cb134-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-51"><a href="data-transfer-and-eddie.html#cb134-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-52"><a href="data-transfer-and-eddie.html#cb134-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-53"><a href="data-transfer-and-eddie.html#cb134-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-54"><a href="data-transfer-and-eddie.html#cb134-54" aria-hidden="true" tabindex="-1"></a><span class="do">### Local Variables: ***</span></span>
<span id="cb134-55"><a href="data-transfer-and-eddie.html#cb134-55" aria-hidden="true" tabindex="-1"></a><span class="do">### mode: sh ***</span></span>
<span id="cb134-56"><a href="data-transfer-and-eddie.html#cb134-56" aria-hidden="true" tabindex="-1"></a><span class="do">### sh-indentation: 2 ***</span></span></code></pre></div>
<p>The <code>.Renviron</code> file can be copied to specific projects when specific R files / directories (or files / directories for other languages) are needed to run a particular analysis. For example, to use the GCC compiler from IGMM the following could be added to the file:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data-transfer-and-eddie.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Change the Clang variables</span></span>
<span id="cb135-2"><a href="data-transfer-and-eddie.html#cb135-2" aria-hidden="true" tabindex="-1"></a>CC<span class="ot">=</span>igmm<span class="sc">/</span>compilers<span class="sc">/</span>gcc<span class="sc">/</span><span class="dv">5</span>.<span class="fl">5.0</span> <span class="sc">-</span>fopenmp</span>
<span id="cb135-3"><a href="data-transfer-and-eddie.html#cb135-3" aria-hidden="true" tabindex="-1"></a>CXX<span class="ot">=</span>igmm<span class="sc">/</span>compilers<span class="sc">/</span>gcc<span class="sc">/</span><span class="dv">5</span>.<span class="fl">5.0</span> <span class="sc">-</span>fopenmp</span></code></pre></div>
<p>The <code>.Rprofile</code> files and <code>.Renviron</code> files should be as generic as possible in your own profile so as to avoid issues when sharing scripts. They can be tailored for specific projects when needed in the local working directory. Typically this should be to alter the paths to directories etc. and not to create bespoke functions which should be done in scripts.</p>
</div>
</div>
<div id="specific-r-package-versions" class="section level3 hasAnchor" number="5.5.6">
<h3><span class="header-section-number">5.5.6</span> Specific R Package Versions<a href="data-transfer-and-eddie.html#specific-r-package-versions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with other teams it is often necessary to work with particular R package versions. One effective way to ensure you do this is using the remotes package:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data-transfer-and-eddie.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the GenABEL package from CRAN but as no longer supporte need the 1.8-0 version from the archive</span></span>
<span id="cb136-2"><a href="data-transfer-and-eddie.html#cb136-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_version</span>(<span class="st">&quot;GenABEL&quot;</span>, <span class="at">version =</span> <span class="st">&quot;1.8-0&quot;</span>)</span></code></pre></div>
</div>
<div id="general-eddie-etiquette" class="section level3 hasAnchor" number="5.5.7">
<h3><span class="header-section-number">5.5.7</span> General Eddie Etiquette<a href="data-transfer-and-eddie.html#general-eddie-etiquette" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Don’t overwrite or change other users files without permission and set up your own files to prevent others doing that if appropriate. Please don’t leave configuration files like <code>.Renviron</code> files in the shared space as this can play havoc with other users R tasks in Eddie - if you need a particular configuration (e.g. a default package library for a project) then best to leave the config files in the directory for that project (or in your own home directory).</p>
</div>
</div>
<div id="additional-resources" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Additional Resources<a href="data-transfer-and-eddie.html#additional-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following resource covers some of the commands needed for the Univa Grid Enginge scheduler which is used to submit jobs on Eddie:</p>
<p><a href="https://angus.readthedocs.io/en/2019/Intro_to_Cluster.html#" class="uri">https://angus.readthedocs.io/en/2019/Intro_to_Cluster.html#</a></p>
</div>
<div id="using-rstudio-directly-in-eddie" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Using RStudio directly in Eddie<a href="data-transfer-and-eddie.html#using-rstudio-directly-in-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Eddie is not meant for GUIs, but the good people at IGMM have installed RStudio installed on Eddie. It is terribly slow, but better than nothing and can be useful when you need to have a quick look and are really tired of doing command line R.</p>
<p>Make sure you have X11 forwarding installed/enabled. On a Windows computer use MobaXterm. In macOS, install XQuarts, but then use the Terminal as usual.</p>
<pre><code>ssh -Y username@eddie.ecdf.ed.ac.uk
qlogin -l h_vmem=8G
module load igmm/apps/RStudio/1.1.383
module load igmm/apps/R/3.6.3
rstudio</code></pre>
<p>Of the qlogin line requesting an interactive session times out then try <code>qlogin -l h_vmem=4G</code> instead. 2GB is the absolute minimum that will work.</p>
<p>Use <code>module avail</code> to check what the latest installed RStudio and R versions are.</p>
</div>
<div id="configuring-python-deep-learning-environment-in-eddie" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Configuring Python Deep Learning Environment in Eddie<a href="data-transfer-and-eddie.html#configuring-python-deep-learning-environment-in-eddie" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section, we will show how to configure the deep learning development environment in Eddie with Anaconda, PyTorch and Python.</p>
<div id="package-installation" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Package installation<a href="data-transfer-and-eddie.html#package-installation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Anaconda is a package management tool that can easily help us manage different python versions and package reliance. To use anaconda, simply try <code>module load anaconda</code>.</p>
<p>Then we need to redirect the package and environment installation folder to the group folder to prevent these folders from becoming too huge and occupying your personal storage:</p>
<pre><code>conda config --add envs_dirs /exports/cmvm/eddie/edmed/groups/SurgInfGrp/anaconda/envs
conda config --add pkgs_dirs /exports/cmvm/eddie/edmed/groups/SurgInfGrp/anaconda/pkgs</code></pre>
<p>We already have a configured pytorch environment in these folders. To use that, try <code>conda activate torch</code>.</p>
<p>If you want to build your own env from scratch, use <code>conda create -n mypython python=3.7.4</code>, where 3.7.4 can be any python version you want to use and mypython is the env name. Then you can activate your environment by using <code>conda activate mypython</code> and installing packages with <code>pip install</code> or <code>conda install</code>.</p>
</div>
<div id="gpu-usage" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> GPU usage<a href="data-transfer-and-eddie.html#gpu-usage" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To use GPU computation, please refer to the <a href="https://www.wiki.ed.ac.uk/display/ResearchServices/GPUs" class="uri">https://www.wiki.ed.ac.uk/display/ResearchServices/GPUs</a> for the detailed documents. Generally I recommend using an interactive session during model development phase and using a normal job session for long-term training.</p>
<p>A sample code to request an interactive session with a Tesla K80 GPU and 16G memory is <code>qlogin -pe gpu 1 -l h_vmem=16g</code>. You also need to <code>module load cuda</code> to enable cuda acceleration.</p>
</div>
</div>
<div id="configuring-jupyter-notebook-access" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Configuring Jupyter Notebook Access<a href="data-transfer-and-eddie.html#configuring-jupyter-notebook-access" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Jupyter notebook can be a very efficient tool to develop python analytics pipeline. You can run a notebook server on the remote Eddie node and access the notebook from your local browser or editor. First, request an interactive session and activate the conda environment you need. Then use the following code to activate a jupyter notebook server:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb139-1"><a href="data-transfer-and-eddie.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/bash</span></span>
<span id="cb139-2"><a href="data-transfer-and-eddie.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co">## get tunneling info</span></span>
<span id="cb139-3"><a href="data-transfer-and-eddie.html#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="va">ipnport</span><span class="op">=</span>8515</span>
<span id="cb139-4"><a href="data-transfer-and-eddie.html#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="va">ipnip</span><span class="op">=</span><span class="va">$(</span><span class="fu">hostname</span> <span class="at">-i</span><span class="va">)</span></span>
<span id="cb139-5"><a href="data-transfer-and-eddie.html#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="co">## print tunneling instructions to jupyter-log-{jobid}.txt</span></span>
<span id="cb139-6"><a href="data-transfer-and-eddie.html#cb139-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-e</span> <span class="st">&quot;</span></span>
<span id="cb139-7"><a href="data-transfer-and-eddie.html#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="st">        Copy/ Paste this in your local terminal to ssh tunnel with remote</span></span>
<span id="cb139-8"><a href="data-transfer-and-eddie.html#cb139-8" aria-hidden="true" tabindex="-1"></a><span class="st">        -----------------------------------------------------------------</span></span>
<span id="cb139-9"><a href="data-transfer-and-eddie.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="st">        ##ssh -N -L </span><span class="va">$ipnport</span><span class="st">:</span><span class="va">$ipnip</span><span class="st">:</span><span class="va">$ipnport</span><span class="st"> [USERNAME]@eddie.ecdf.ed.ac.uk</span></span>
<span id="cb139-10"><a href="data-transfer-and-eddie.html#cb139-10" aria-hidden="true" tabindex="-1"></a><span class="st">    ssh -N -L </span><span class="va">$ipnport</span><span class="st">:</span><span class="va">$ipnip</span><span class="st">:</span><span class="va">$ipnport</span></span>
<span id="cb139-11"><a href="data-transfer-and-eddie.html#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="st">        -----------------------------------------------------------------</span></span>
<span id="cb139-12"><a href="data-transfer-and-eddie.html#cb139-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-13"><a href="data-transfer-and-eddie.html#cb139-13" aria-hidden="true" tabindex="-1"></a><span class="st">        Then open a browser on your local machine to the following address</span></span>
<span id="cb139-14"><a href="data-transfer-and-eddie.html#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="st">        ------------------------------------------------------------------</span></span>
<span id="cb139-15"><a href="data-transfer-and-eddie.html#cb139-15" aria-hidden="true" tabindex="-1"></a><span class="st">        localhost:</span><span class="va">$ipnport</span><span class="st"> (prefix w/ https:// if using password)</span></span>
<span id="cb139-16"><a href="data-transfer-and-eddie.html#cb139-16" aria-hidden="true" tabindex="-1"></a><span class="st">        ------------------------------------------------------------------</span></span>
<span id="cb139-17"><a href="data-transfer-and-eddie.html#cb139-17" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;</span></span>
<span id="cb139-18"><a href="data-transfer-and-eddie.html#cb139-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-19"><a href="data-transfer-and-eddie.html#cb139-19" aria-hidden="true" tabindex="-1"></a><span class="co">## launch jupyter server</span></span>
<span id="cb139-20"><a href="data-transfer-and-eddie.html#cb139-20" aria-hidden="true" tabindex="-1"></a><span class="ex">jupyter-notebook</span> <span class="at">--no-browser</span> <span class="at">--port</span><span class="op">=</span><span class="va">$ipnport</span> <span class="at">--ip</span><span class="op">=</span><span class="va">$ipnip</span></span></code></pre></div>
<p>If you want to have the access to the node after you close your terminal, you can use <code>screen</code>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="machine-learning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plotting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["cookbook.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
