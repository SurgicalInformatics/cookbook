<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Server admin | The Surgical Informatics Cookbook</title>
  <meta name="description" content="All the brilliant bits of code we don’t want to forget." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Server admin | The Surgical Informatics Cookbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="All the brilliant bits of code we don’t want to forget." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Server admin | The Surgical Informatics Cookbook" />
  
  <meta name="twitter:description" content="All the brilliant bits of code we don’t want to forget." />
  

<meta name="author" content="Surgical Informatics, University of Edinburgh" />


<meta name="date" content="2024-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="programming-in-rlang.html"/>
<link rel="next" href="redcap.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.29/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-buttons-1.13.4/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.13.4/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.13.4/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.13.4/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.13.4/js/buttons.print.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/dt-plugin-searchhighlight-1.13.4/source.css" rel="stylesheet" />
<script src="libs/dt-plugin-searchhighlight-1.13.4/jquery.highlight.js"></script>
<script src="libs/dt-plugin-searchhighlight-1.13.4/source.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Surgical Informatics Cookbook</a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#how-to-contribute"><i class="fa fa-check"></i><b>1.1</b> How to contribute</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#indexing"><i class="fa fa-check"></i><b>1.2</b> Indexing</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#index"><i class="fa fa-check"></i><b>1.2.1</b> Index</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#chapter-and-section-references"><i class="fa fa-check"></i><b>1.2.2</b> Chapter and section references</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction.html"><a href="introduction.html#figure-and-table-references"><i class="fa fa-check"></i><b>1.2.3</b> Figure and table references</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction.html"><a href="introduction.html#citations"><i class="fa fa-check"></i><b>1.2.4</b> Citations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="snippets.html"><a href="snippets.html"><i class="fa fa-check"></i><b>2</b> Snippets</a>
<ul>
<li class="chapter" data-level="2.1" data-path="snippets.html"><a href="snippets.html#useful-rstudio-functions"><i class="fa fa-check"></i><b>2.1</b> Useful RStudio functions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="snippets.html"><a href="snippets.html#clean-restart"><i class="fa fa-check"></i><b>2.1.1</b> Clean restart</a></li>
<li class="chapter" data-level="2.1.2" data-path="snippets.html"><a href="snippets.html#remove-duplicated-packages-between-personal-and-system-libraries"><i class="fa fa-check"></i><b>2.1.2</b> Remove duplicated packages between personal and system libraries</a></li>
<li class="chapter" data-level="2.1.3" data-path="snippets.html"><a href="snippets.html#remove-large-file-accidentally-committed-to-git"><i class="fa fa-check"></i><b>2.1.3</b> Remove large file accidentally committed to git</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="snippets.html"><a href="snippets.html#memory-and-efficient-ram-usage"><i class="fa fa-check"></i><b>2.2</b> Memory and efficient RAM usage</a></li>
<li class="chapter" data-level="2.3" data-path="snippets.html"><a href="snippets.html#exporting-tables-that-work-in-both-pdf-and-word"><i class="fa fa-check"></i><b>2.3</b> Exporting tables that work in both PDF and Word</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="snippets.html"><a href="snippets.html#warning-in-kableextra.-please-specify-format-in-kable.-kableextra-can-customize-either-html-or-latex-outputs."><i class="fa fa-check"></i><b>2.3.1</b> Warning in kableExtra. Please specify format in kable. kableExtra can customize either HTML or LaTeX outputs.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="snippets.html"><a href="snippets.html#creating-reproducible-r-examples-to-share-in-the-group-binder-holepunch-and-docker"><i class="fa fa-check"></i><b>2.4</b> Creating Reproducible R Examples to Share in the Group (binder, holepunch and docker)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="snippets.html"><a href="snippets.html#create-basic-reproducible-examples"><i class="fa fa-check"></i><b>2.4.1</b> Create Basic Reproducible Examples</a></li>
<li class="chapter" data-level="2.4.2" data-path="snippets.html"><a href="snippets.html#holepunch---complex-reproducible-examples"><i class="fa fa-check"></i><b>2.4.2</b> <code>holepunch</code> - Complex Reproducible Examples</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="snippets.html"><a href="snippets.html#working-with-chis"><i class="fa fa-check"></i><b>2.5</b> Working with CHIs</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="snippets.html"><a href="snippets.html#chi_dob---extract-date-of-birth-from-chi"><i class="fa fa-check"></i><b>2.5.1</b> <code>chi_dob()</code> - Extract date of birth from CHI</a></li>
<li class="chapter" data-level="2.5.2" data-path="snippets.html"><a href="snippets.html#chi_gender---extract-gender-from-chi"><i class="fa fa-check"></i><b>2.5.2</b> <code>chi_gender()</code> - Extract gender from CHI</a></li>
<li class="chapter" data-level="2.5.3" data-path="snippets.html"><a href="snippets.html#chi_age---extract-age-from-chi"><i class="fa fa-check"></i><b>2.5.3</b> <code>chi_age()</code> - Extract age from CHI</a></li>
<li class="chapter" data-level="2.5.4" data-path="snippets.html"><a href="snippets.html#chi_valid---logical-test-for-valid-chi"><i class="fa fa-check"></i><b>2.5.4</b> <code>chi_valid()</code> - Logical test for valid CHI</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="snippets.html"><a href="snippets.html#working-with-dates"><i class="fa fa-check"></i><b>2.6</b> Working with dates</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="snippets.html"><a href="snippets.html#difference-between-two-dates"><i class="fa fa-check"></i><b>2.6.1</b> Difference between two dates</a></li>
<li class="chapter" data-level="2.6.2" data-path="snippets.html"><a href="snippets.html#lags"><i class="fa fa-check"></i><b>2.6.2</b> Lags</a></li>
<li class="chapter" data-level="2.6.3" data-path="snippets.html"><a href="snippets.html#pulling-out-change-in-status-data"><i class="fa fa-check"></i><b>2.6.3</b> Pulling out “change in status” data</a></li>
<li class="chapter" data-level="2.6.4" data-path="snippets.html"><a href="snippets.html#guess-the-format-of-dates"><i class="fa fa-check"></i><b>2.6.4</b> Guess the Format of Dates</a></li>
<li class="chapter" data-level="2.6.5" data-path="snippets.html"><a href="snippets.html#isoweek-and-epiweek"><i class="fa fa-check"></i><b>2.6.5</b> Isoweek and epiweek</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="snippets.html"><a href="snippets.html#labelling-tables-and-figures-in-markdown-chunks"><i class="fa fa-check"></i><b>2.7</b> Labelling tables and figures in markdown chunks</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="snippets.html"><a href="snippets.html#plots"><i class="fa fa-check"></i><b>2.7.1</b> Plots</a></li>
<li class="chapter" data-level="2.7.2" data-path="snippets.html"><a href="snippets.html#tables"><i class="fa fa-check"></i><b>2.7.2</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="snippets.html"><a href="snippets.html#join-tables-and-overwrite-values-that-are-often-missing"><i class="fa fa-check"></i><b>2.8</b> Join tables and overwrite values (that are often missing)</a></li>
<li class="chapter" data-level="2.9" data-path="snippets.html"><a href="snippets.html#read-in-multiple-files"><i class="fa fa-check"></i><b>2.9</b> Read in multiple files</a></li>
<li class="chapter" data-level="2.10" data-path="snippets.html"><a href="snippets.html#averaging-multiple-aucs-say-from-imputed-datasets"><i class="fa fa-check"></i><b>2.10</b> Averaging multiple AUCs (say from imputed datasets)</a></li>
<li class="chapter" data-level="2.11" data-path="snippets.html"><a href="snippets.html#formating-thousands-automatically"><i class="fa fa-check"></i><b>2.11</b> Formating thousands automatically</a></li>
<li class="chapter" data-level="2.12" data-path="snippets.html"><a href="snippets.html#datatable-function"><i class="fa fa-check"></i><b>2.12</b> DataTable function</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>3</b> Data manipulation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#collapse-multiple-no-and-yes-options"><i class="fa fa-check"></i><b>3.1</b> Collapse multiple “no” and “yes” options</a></li>
<li class="chapter" data-level="3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#filtering-best-practice"><i class="fa fa-check"></i><b>3.2</b> Filtering best practice</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#from-jamie-farrell"><i class="fa fa-check"></i><b>3.2.1</b> From Jamie Farrell</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-manipulation.html"><a href="data-manipulation.html#filter-na-dropping-rows-where-all-specified-variables-are-na"><i class="fa fa-check"></i><b>3.3</b> Filter NA: Dropping rows where all specified variables are NA</a></li>
<li class="chapter" data-level="3.4" data-path="data-manipulation.html"><a href="data-manipulation.html#vectorising-rowwise-procedures"><i class="fa fa-check"></i><b>3.4</b> Vectorising rowwise procedures</a></li>
<li class="chapter" data-level="3.5" data-path="data-manipulation.html"><a href="data-manipulation.html#multiple-imputation-and-ipw-for-missing-data"><i class="fa fa-check"></i><b>3.5</b> Multiple imputation and IPW for missing data</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data-manipulation.html"><a href="data-manipulation.html#data"><i class="fa fa-check"></i><b>3.5.1</b> Data</a></li>
<li class="chapter" data-level="3.5.2" data-path="data-manipulation.html"><a href="data-manipulation.html#multiple-imputation"><i class="fa fa-check"></i><b>3.5.2</b> Multiple imputation</a></li>
<li class="chapter" data-level="3.5.3" data-path="data-manipulation.html"><a href="data-manipulation.html#ipw"><i class="fa fa-check"></i><b>3.5.3</b> IPW</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>4</b> Machine learning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="machine-learning.html"><a href="machine-learning.html#deep-learning"><i class="fa fa-check"></i><b>4.1</b> Deep learning</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="machine-learning.html"><a href="machine-learning.html#pulling-images-from-redcap-directly-to-argodeep"><i class="fa fa-check"></i><b>4.1.1</b> Pulling images from REDCap directly to argodeep</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html"><i class="fa fa-check"></i><b>5</b> Data Transfer and Eddie</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#uploading-and-downloading-data-the-easy-way"><i class="fa fa-check"></i><b>5.1</b> Uploading and Downloading Data the Easy Way</a></li>
<li class="chapter" data-level="5.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#alternative-methods-when-the-easy-way-wont-work"><i class="fa fa-check"></i><b>5.2</b> Alternative Methods when the Easy Way won’t work</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#what-is-eddie"><i class="fa fa-check"></i><b>5.2.1</b> What is Eddie?</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#using-the-command-line"><i class="fa fa-check"></i><b>5.3</b> Using the Command Line</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#downloads-and-setup---eddie-example"><i class="fa fa-check"></i><b>5.3.1</b> Downloads and Setup - Eddie Example</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#copy-and-paste-with-putty"><i class="fa fa-check"></i><b>5.3.2</b> Copy and Paste with PuTTY</a></li>
<li class="chapter" data-level="5.3.3" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#closing-a-session-in-putty"><i class="fa fa-check"></i><b>5.3.3</b> Closing a Session in PuTTY</a></li>
<li class="chapter" data-level="5.3.4" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#eddie-file-structure"><i class="fa fa-check"></i><b>5.3.4</b> Eddie File Structure</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#copying-data-from-eddie-into-rstudio-server"><i class="fa fa-check"></i><b>5.4</b> Copying Data from Eddie into RStudio server</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#method-1-using-putty-or-another-terminalshell-connected-to-eddie"><i class="fa fa-check"></i><b>5.4.1</b> Method 1: Using PuTTY (or another terminal/shell connected to Eddie)</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#method-2-using-the-rstudio-server-terminal"><i class="fa fa-check"></i><b>5.4.2</b> Method 2: Using the RStudio Server Terminal</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#group-folders-on-eddie-and-datastore"><i class="fa fa-check"></i><b>5.5</b> Group Folders on Eddie and DataStore</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#the-scratch-space"><i class="fa fa-check"></i><b>5.5.1</b> The Scratch Space</a></li>
<li class="chapter" data-level="5.5.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#datastore"><i class="fa fa-check"></i><b>5.5.2</b> DataStore</a></li>
<li class="chapter" data-level="5.5.3" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#running-eddie-from-rstudio-server"><i class="fa fa-check"></i><b>5.5.3</b> Running Eddie from RStudio Server</a></li>
<li class="chapter" data-level="5.5.4" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#modules-applications-in-eddie"><i class="fa fa-check"></i><b>5.5.4</b> Modules (Applications) in Eddie</a></li>
<li class="chapter" data-level="5.5.5" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#working-with-r-in-eddie"><i class="fa fa-check"></i><b>5.5.5</b> Working with R in Eddie</a></li>
<li class="chapter" data-level="5.5.6" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#specific-r-package-versions"><i class="fa fa-check"></i><b>5.5.6</b> Specific R Package Versions</a></li>
<li class="chapter" data-level="5.5.7" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#general-eddie-etiquette"><i class="fa fa-check"></i><b>5.5.7</b> General Eddie Etiquette</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#additional-resources"><i class="fa fa-check"></i><b>5.6</b> Additional Resources</a></li>
<li class="chapter" data-level="5.7" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#using-rstudio-directly-in-eddie"><i class="fa fa-check"></i><b>5.7</b> Using RStudio directly in Eddie</a></li>
<li class="chapter" data-level="5.8" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#configuring-python-deep-learning-environment-in-eddie"><i class="fa fa-check"></i><b>5.8</b> Configuring Python Deep Learning Environment in Eddie</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#package-installation"><i class="fa fa-check"></i><b>5.8.1</b> Package installation</a></li>
<li class="chapter" data-level="5.8.2" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#gpu-usage"><i class="fa fa-check"></i><b>5.8.2</b> GPU usage</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="data-transfer-and-eddie.html"><a href="data-transfer-and-eddie.html#configuring-jupyter-notebook-access"><i class="fa fa-check"></i><b>5.9</b> Configuring Jupyter Notebook Access</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>6</b> Plotting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="plotting.html"><a href="plotting.html#gghighlight-example"><i class="fa fa-check"></i><b>6.1</b> GGHighlight Example</a></li>
<li class="chapter" data-level="6.2" data-path="plotting.html"><a href="plotting.html#coord_flip-factor-orders"><i class="fa fa-check"></i><b>6.2</b> <code>coord_flip()</code> factor orders</a></li>
<li class="chapter" data-level="6.3" data-path="plotting.html"><a href="plotting.html#axis-font-size"><i class="fa fa-check"></i><b>6.3</b> Axis font size</a></li>
<li class="chapter" data-level="6.4" data-path="plotting.html"><a href="plotting.html#shorten-arrows-on-a-dag"><i class="fa fa-check"></i><b>6.4</b> Shorten Arrows on a DAG</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="genomics.html"><a href="genomics.html"><i class="fa fa-check"></i><b>7</b> Genomics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="genomics.html"><a href="genomics.html#single-cell-analysis"><i class="fa fa-check"></i><b>7.1</b> Single Cell Analysis</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="genomics.html"><a href="genomics.html#minimising-the-size-of-a-seurat-object"><i class="fa fa-check"></i><b>7.1.1</b> Minimising the size of a Seurat Object</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="genomics.html"><a href="genomics.html#nextflow"><i class="fa fa-check"></i><b>7.2</b> Nextflow</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="genomics.html"><a href="genomics.html#rnaseq-example-with-sbatch-slurm"><i class="fa fa-check"></i><b>7.2.1</b> RNASeq example with sbatch (slurm)</a></li>
<li class="chapter" data-level="7.2.2" data-path="genomics.html"><a href="genomics.html#dnaseq-example-with-sbatch-slurm"><i class="fa fa-check"></i><b>7.2.2</b> DNASeq example with sbatch (slurm)</a></li>
<li class="chapter" data-level="7.2.3" data-path="genomics.html"><a href="genomics.html#atacseq-example-with-sbatch-slurm"><i class="fa fa-check"></i><b>7.2.3</b> ATACSeq example with sbatch (slurm)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html"><i class="fa fa-check"></i><b>8</b> Programming in rlang</a>
<ul>
<li class="chapter" data-level="8.1" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html#rlang"><i class="fa fa-check"></i><b>8.1</b> rlang</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html#what-is-rlang"><i class="fa fa-check"></i><b>8.1.1</b> What is rlang?</a></li>
<li class="chapter" data-level="8.1.2" data-path="programming-in-rlang.html"><a href="programming-in-rlang.html#dynamic-calling-of-variables-using-dplyr"><i class="fa fa-check"></i><b>8.1.2</b> Dynamic calling of variables using dplyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="server-admin.html"><a href="server-admin.html"><i class="fa fa-check"></i><b>9</b> Server admin</a>
<ul>
<li class="chapter" data-level="9.1" data-path="server-admin.html"><a href="server-admin.html#rstudio-argonaut-and-argosafe"><i class="fa fa-check"></i><b>9.1</b> RStudio (argonaut and argosafe)</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="server-admin.html"><a href="server-admin.html#scheduled-script-cron"><i class="fa fa-check"></i><b>9.1.1</b> Scheduled script (CRON)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="server-admin.html"><a href="server-admin.html#rstudio-connect-argoshare"><i class="fa fa-check"></i><b>9.2</b> RStudio Connect: argoshare</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="server-admin.html"><a href="server-admin.html#delete-user"><i class="fa fa-check"></i><b>9.2.1</b> Delete user</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="server-admin.html"><a href="server-admin.html#shiny-server-opensource-setup---uoe-eleanor"><i class="fa fa-check"></i><b>9.3</b> Shiny server opensource setup - UoE Eleanor</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="server-admin.html"><a href="server-admin.html#setting-up-ubuntu-instance"><i class="fa fa-check"></i><b>9.3.1</b> Setting up Ubuntu Instance</a></li>
<li class="chapter" data-level="9.3.2" data-path="server-admin.html"><a href="server-admin.html#install-nginx"><i class="fa fa-check"></i><b>9.3.2</b> Install Nginx</a></li>
<li class="chapter" data-level="9.3.3" data-path="server-admin.html"><a href="server-admin.html#installing-r"><i class="fa fa-check"></i><b>9.3.3</b> Installing R</a></li>
<li class="chapter" data-level="9.3.4" data-path="server-admin.html"><a href="server-admin.html#installing-shiny-server"><i class="fa fa-check"></i><b>9.3.4</b> Installing Shiny Server</a></li>
<li class="chapter" data-level="9.3.5" data-path="server-admin.html"><a href="server-admin.html#installing-other-linux-packages"><i class="fa fa-check"></i><b>9.3.5</b> Installing other Linux packages</a></li>
<li class="chapter" data-level="9.3.6" data-path="server-admin.html"><a href="server-admin.html#installing-r-packages"><i class="fa fa-check"></i><b>9.3.6</b> Installing R packages</a></li>
<li class="chapter" data-level="9.3.7" data-path="server-admin.html"><a href="server-admin.html#loading-your-app"><i class="fa fa-check"></i><b>9.3.7</b> Loading your app</a></li>
<li class="chapter" data-level="9.3.8" data-path="server-admin.html"><a href="server-admin.html#make-your-app-the-default-index-page"><i class="fa fa-check"></i><b>9.3.8</b> Make your app the default index page</a></li>
<li class="chapter" data-level="9.3.9" data-path="server-admin.html"><a href="server-admin.html#getting-a-user-friendly-domain-name"><i class="fa fa-check"></i><b>9.3.9</b> Getting a user-friendly domain name</a></li>
<li class="chapter" data-level="9.3.10" data-path="server-admin.html"><a href="server-admin.html#appendix-1-password-protecting-your-site"><i class="fa fa-check"></i><b>9.3.10</b> Appendix 1 – Password protecting your site</a></li>
<li class="chapter" data-level="9.3.11" data-path="server-admin.html"><a href="server-admin.html#appendix-2-setting-up-a-swap-file"><i class="fa fa-check"></i><b>9.3.11</b> APPENDIX 2 – Setting up a swap file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="redcap.html"><a href="redcap.html"><i class="fa fa-check"></i><b>10</b> REDCap</a>
<ul>
<li class="chapter" data-level="10.1" data-path="redcap.html"><a href="redcap.html#api-pull"><i class="fa fa-check"></i><b>10.1</b> API pull</a></li>
<li class="chapter" data-level="10.2" data-path="redcap.html"><a href="redcap.html#applying-a-redcap-factoring-script"><i class="fa fa-check"></i><b>10.2</b> Applying a REDCap factoring script</a></li>
<li class="chapter" data-level="10.3" data-path="redcap.html"><a href="redcap.html#alternative-to-the-factoring-script-redcap_label-from-librarycollaboratorr"><i class="fa fa-check"></i><b>10.3</b> Alternative to the factoring script: <code>redcap_label()</code> from <code>library(collaboratorR)</code></a></li>
<li class="chapter" data-level="10.4" data-path="redcap.html"><a href="redcap.html#scannable-barcodes-in-redcap"><i class="fa fa-check"></i><b>10.4</b> Scannable barcodes in REDCap</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html"><i class="fa fa-check"></i><b>11</b> Working with digital pathology data and python</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#installing-openslide"><i class="fa fa-check"></i><b>11.1</b> Installing OpenSlide</a></li>
<li class="chapter" data-level="11.2" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#using-openslide"><i class="fa fa-check"></i><b>11.2</b> Using OpenSlide</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#opening-a-slide-and-inspecting-properties"><i class="fa fa-check"></i><b>11.2.1</b> Opening a slide and inspecting properties</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#whole-workflow"><i class="fa fa-check"></i><b>11.3</b> Whole workflow</a></li>
<li class="chapter" data-level="11.4" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#using-python-and-r-together"><i class="fa fa-check"></i><b>11.4</b> Using python and R together</a></li>
<li class="chapter" data-level="11.5" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#handling-errors-in-python"><i class="fa fa-check"></i><b>11.5</b> Handling errors in python</a></li>
<li class="chapter" data-level="11.6" data-path="working-with-digital-pathology-data-and-python.html"><a href="working-with-digital-pathology-data-and-python.html#iterating-over-many-many-slide-files"><i class="fa fa-check"></i><b>11.6</b> Iterating over many many slide files</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html"><i class="fa fa-check"></i><b>12</b> Citations with R Markdown</a>
<ul>
<li class="chapter" data-level="12.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#zotero-set-up"><i class="fa fa-check"></i><b>12.1</b> Zotero Set-up</a></li>
<li class="chapter" data-level="12.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#file-storage-set-up"><i class="fa fa-check"></i><b>12.2</b> File Storage Set-up</a></li>
<li class="chapter" data-level="12.3" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#folder-set-up"><i class="fa fa-check"></i><b>12.3</b> Folder Set-up</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#storing-pdfs"><i class="fa fa-check"></i><b>12.3.1</b> Storing PDFs</a></li>
<li class="chapter" data-level="12.3.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#storing-bibliographies"><i class="fa fa-check"></i><b>12.3.2</b> Storing Bibliographies</a></li>
<li class="chapter" data-level="12.3.3" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#subfolder-for-references"><i class="fa fa-check"></i><b>12.3.3</b> Subfolder for References</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#configuring-zotero"><i class="fa fa-check"></i><b>12.4</b> Configuring Zotero</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#zotfile-pdf-preferences"><i class="fa fa-check"></i><b>12.4.1</b> ZotFile PDF Preferences</a></li>
<li class="chapter" data-level="12.4.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#general-zotero-settings"><i class="fa fa-check"></i><b>12.4.2</b> General Zotero Settings</a></li>
<li class="chapter" data-level="12.4.3" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#refresh-bibtex-citation-key"><i class="fa fa-check"></i><b>12.4.3</b> Refresh BibTex Citation Key</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#generating-a-.bib-file"><i class="fa fa-check"></i><b>12.5</b> Generating a .bib File</a></li>
<li class="chapter" data-level="12.6" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#linking-dropbox-and-rstudio-server"><i class="fa fa-check"></i><b>12.6</b> Linking DropBox and Rstudio Server</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#token-creation"><i class="fa fa-check"></i><b>12.6.1</b> Token Creation</a></li>
<li class="chapter" data-level="12.6.2" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#dropbox-linkage"><i class="fa fa-check"></i><b>12.6.2</b> DropBox Linkage</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="citations-with-r-markdown.html"><a href="citations-with-r-markdown.html#citing-r-packages"><i class="fa fa-check"></i><b>12.7</b> Citing R Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Surgical Informatics Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="server-admin" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapter 9</span> Server admin<a href="server-admin.html#server-admin" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="rstudio-argonaut-and-argosafe" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> RStudio (argonaut and argosafe)<a href="server-admin.html#rstudio-argonaut-and-argosafe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="scheduled-script-cron" class="section level3 hasAnchor" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Scheduled script (CRON)<a href="server-admin.html#scheduled-script-cron" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most scheduling is best done using RStudio Connect (argoshare), see below.
For certain applications, it may be desirable to do this on argonaut or argosafe.
For instance, if a scheduled job is required to be done in a trusted research environment.</p>
<p>This can be done by adding a cron job.</p>
<p>The following will execute the <code>R</code> script at 7AM everyday. A log file is written within the project.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb153-1"><a href="server-admin.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crontab</span> <span class="at">-e</span></span>
<span id="cb153-2"><a href="server-admin.html#cb153-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-3"><a href="server-admin.html#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Add line (using e.g. nano editor)</span></span>
<span id="cb153-4"><a href="server-admin.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="ex">00</span> 07 <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> Rscript /home/user/project/script.R <span class="op">&amp;&gt;&gt;</span> /home/user/project/cron.log</span></code></pre></div>
<p>The cronjob does not load the user environment.
If you are using environment variables in R, e.g. API tokens, then these can be loaded within the R script.
Include this at the top of your script.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="server-admin.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log</span></span>
<span id="cb154-2"><a href="server-admin.html#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Start:&quot;</span>, <span class="fu">Sys.time</span>()))</span>
<span id="cb154-3"><a href="server-admin.html#cb154-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-4"><a href="server-admin.html#cb154-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Environment variables</span></span>
<span id="cb154-5"><a href="server-admin.html#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="fu">readRenviron</span>(<span class="st">&quot;/home/user/.Renviron&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="rstudio-connect-argoshare" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> RStudio Connect: argoshare<a href="server-admin.html#rstudio-connect-argoshare" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="delete-user" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Delete user<a href="server-admin.html#delete-user" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb155"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb155-1"><a href="server-admin.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Delete user from argoshare</span></span>
<span id="cb155-2"><a href="server-admin.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co">## Connect must be stopped first</span></span>
<span id="cb155-3"><a href="server-admin.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop rstudio-connect</span>
<span id="cb155-4"><a href="server-admin.html#cb155-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-5"><a href="server-admin.html#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="co">## List all users</span></span>
<span id="cb155-6"><a href="server-admin.html#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /opt/rstudio-connect/bin/usermanager list</span>
<span id="cb155-7"><a href="server-admin.html#cb155-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-8"><a href="server-admin.html#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Find guid for the user you want to delete, looks like below. </span></span>
<span id="cb155-9"><a href="server-admin.html#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="co">## Delete user - need to say y/n</span></span>
<span id="cb155-10"><a href="server-admin.html#cb155-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /opt/rstudio-connect/bin/usermanager delete <span class="at">--users</span> <span class="at">--user-guid</span> 46cb5adb-4036-451f-9f08-0da3197dbc6c</span>
<span id="cb155-11"><a href="server-admin.html#cb155-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-12"><a href="server-admin.html#cb155-12" aria-hidden="true" tabindex="-1"></a><span class="co">## Restart connect</span></span>
<span id="cb155-13"><a href="server-admin.html#cb155-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start rstudio-connect</span></code></pre></div>
</div>
</div>
<div id="shiny-server-opensource-setup---uoe-eleanor" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Shiny server opensource setup - UoE Eleanor<a href="server-admin.html#shiny-server-opensource-setup---uoe-eleanor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This guide assumes you’re already on the University of Edinburgh local network. If you’re working from home, you’ll first need to connect the UoE VPN. It also assumes you already have storage allocated to your project on Eleanor, and that your own computer is either Linux-based or a Mac.</p>
<div id="setting-up-ubuntu-instance" class="section level3 hasAnchor" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Setting up Ubuntu Instance<a href="server-admin.html#setting-up-ubuntu-instance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Log into the Openstack dashboard on Horizon - <a href="https://horizon.ecdf.ed.ac.uk/dashboard/" class="uri">https://horizon.ecdf.ed.ac.uk/dashboard/</a></li>
<li>Click on Instances and launch a new instance (Ubuntu 18.4, t1.small (free tier))</li>
<li>Click on key pairs and create an SSH keypair, for securely logging on to the new instance.</li>
<li>Save the private key to a secure place on your computer (~/.ssh is the usual spot for these things). Change the files permissions to make it secure. Eleanor will not let you SSH without this step. In a local terminal, type:</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb156-1"><a href="server-admin.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> 400 PATH-TO-PRIVATE-KEY</span></code></pre></div>
<ul>
<li>Click on Network &gt; Floating IPs and create a new floating IP. Associate it with your new instance. Make a note of your floating IP – this is the address you’ll use to access your instance from now on.</li>
<li>Click on Security Groups and create a new security group. Add new rules to this group, allowing TCP ingress and egress on the following ports: 80 (HTTP), 22 (SSH), 3838 (Shiny Server).</li>
<li>Log into your instance using SSH. In a local terminal type:</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb157-1"><a href="server-admin.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-i</span> PATH-TO-PRIVATE-KEY ubuntu@YOUR-FLOATING-IP</span>
<span id="cb157-2"><a href="server-admin.html#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="server-admin.html#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="co">#All being well, you’ll now have a terminal for your lovely new Ububtu instance.</span></span>
<span id="cb157-4"><a href="server-admin.html#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Get your instance up-to-date. Run:</span></span>
<span id="cb157-5"><a href="server-admin.html#cb157-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-6"><a href="server-admin.html#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get upgrade</span></code></pre></div>
</div>
<div id="install-nginx" class="section level3 hasAnchor" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Install Nginx<a href="server-admin.html#install-nginx" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nginx is the fast and light webserver that will host you Shiny code.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb158-1"><a href="server-admin.html#cb158-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-2"><a href="server-admin.html#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Install nginx</span></span>
<span id="cb158-3"><a href="server-admin.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get <span class="at">-y</span> install nginx</span></code></pre></div>
<ul>
<li>In a browser, enter your floating IP address. All being well, you should now get a “Welcome to Nginx” page.</li>
</ul>
</div>
<div id="installing-r" class="section level3 hasAnchor" number="9.3.3">
<h3><span class="header-section-number">9.3.3</span> Installing R<a href="server-admin.html#installing-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Installing the latest version of R isn’t as easy as apt-get R. Sources and keys need to be added to the source.list file, then R can be installed (the latest version). The first command sets the sources to the RStudio mirror, then grabs keys to authenticate the installation. Enter the following commands in order:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb159-1"><a href="server-admin.html#cb159-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-2"><a href="server-admin.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> sh <span class="at">-c</span> <span class="st">&#39;echo &quot;deb http://cran.rstudio.com/bin/linux/ubuntu bionic-cran35/&quot; &gt;&gt; /etc/apt/sources.list&#39;</span></span>
<span id="cb159-3"><a href="server-admin.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-key adv <span class="at">--keyserver</span> keyserver.ubuntu.com <span class="at">--recv-keys</span> E298A3A825C0D65DFD57CBB651716619E084DAB9</span>
<span id="cb159-4"><a href="server-admin.html#cb159-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-5"><a href="server-admin.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb159-6"><a href="server-admin.html#cb159-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get <span class="at">-y</span> install r-base</span>
<span id="cb159-7"><a href="server-admin.html#cb159-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-8"><a href="server-admin.html#cb159-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-9"><a href="server-admin.html#cb159-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Now load R</span></span>
<span id="cb159-10"><a href="server-admin.html#cb159-10" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span></span>
<span id="cb159-11"><a href="server-admin.html#cb159-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Enter the following in the R console</span></span>
<span id="cb159-12"><a href="server-admin.html#cb159-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo()</span></span>
<span id="cb159-13"><a href="server-admin.html#cb159-13" aria-hidden="true" tabindex="-1"></a><span class="fu">quit()</span></span></code></pre></div>
</div>
<div id="installing-shiny-server" class="section level3 hasAnchor" number="9.3.4">
<h3><span class="header-section-number">9.3.4</span> Installing Shiny Server<a href="server-admin.html#installing-shiny-server" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a few external libraries that are required to use Shiny Server. Let’s install those, the R package shiny then move on to installing Shiny Server itself.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb160-1"><a href="server-admin.html#cb160-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-2"><a href="server-admin.html#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get <span class="at">-y</span> install gdebi-core</span>
<span id="cb160-3"><a href="server-admin.html#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> su <span class="at">-</span> <span class="at">-c</span> <span class="st">&quot;R -e </span><span class="dt">\&quot;</span><span class="st">install.packages(&#39;shiny&#39;, repos=&#39;http://cran.rstudio.com/&#39;)</span><span class="dt">\&quot;</span><span class="st">&quot;</span></span>
<span id="cb160-4"><a href="server-admin.html#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://download3.rstudio.org/ubuntu-14.04/x86_64/shiny-server-1.5.13.944-amd64.deb</span>
<span id="cb160-5"><a href="server-admin.html#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> gdebi shiny-server-1.5.13.944-amd64.deb</span></code></pre></div>
<p>Back in your browser, go to: YOUR-FLOATING-IP:3838
All being well, you’ll get a Shiny Server test page.</p>
</div>
<div id="installing-other-linux-packages" class="section level3 hasAnchor" number="9.3.5">
<h3><span class="header-section-number">9.3.5</span> Installing other Linux packages<a href="server-admin.html#installing-other-linux-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You’ve got base-R installed and running now, but it’s likely your Shiny app will have other unmet dependencies. Here are a few common packages you’ll probably need, and the command needed to install them. Depending on your app, there may be others.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb161-1"><a href="server-admin.html#cb161-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-2"><a href="server-admin.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb161-3"><a href="server-admin.html#cb161-3" aria-hidden="true" tabindex="-1"></a>    pandoc <span class="dt">\</span></span>
<span id="cb161-4"><a href="server-admin.html#cb161-4" aria-hidden="true" tabindex="-1"></a>    pandoc-citeproc <span class="dt">\</span></span>
<span id="cb161-5"><a href="server-admin.html#cb161-5" aria-hidden="true" tabindex="-1"></a>    libssl-dev <span class="dt">\</span></span>
<span id="cb161-6"><a href="server-admin.html#cb161-6" aria-hidden="true" tabindex="-1"></a>    libcurl4-gnutls-dev <span class="dt">\</span></span>
<span id="cb161-7"><a href="server-admin.html#cb161-7" aria-hidden="true" tabindex="-1"></a>    libcairo2-dev <span class="dt">\</span></span>
<span id="cb161-8"><a href="server-admin.html#cb161-8" aria-hidden="true" tabindex="-1"></a>    libgdal-dev <span class="dt">\</span></span>
<span id="cb161-9"><a href="server-admin.html#cb161-9" aria-hidden="true" tabindex="-1"></a>    libgeos-dev <span class="dt">\</span></span>
<span id="cb161-10"><a href="server-admin.html#cb161-10" aria-hidden="true" tabindex="-1"></a>    libproj-dev <span class="dt">\</span></span>
<span id="cb161-11"><a href="server-admin.html#cb161-11" aria-hidden="true" tabindex="-1"></a>    libxml2-dev <span class="dt">\</span></span>
<span id="cb161-12"><a href="server-admin.html#cb161-12" aria-hidden="true" tabindex="-1"></a>    libxt-dev <span class="dt">\</span></span>
<span id="cb161-13"><a href="server-admin.html#cb161-13" aria-hidden="true" tabindex="-1"></a>    libv8-dev <span class="dt">\</span></span>
<span id="cb161-14"><a href="server-admin.html#cb161-14" aria-hidden="true" tabindex="-1"></a>    git</span></code></pre></div>
</div>
<div id="installing-r-packages" class="section level3 hasAnchor" number="9.3.6">
<h3><span class="header-section-number">9.3.6</span> Installing R packages<a href="server-admin.html#installing-r-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You’ll probably also need a bunch of extra libraries in R (we’ve already installed Shiny, but that’s it). You install these from within R, rather than via apt-get. This is the syntax for installing R packages on the server – just replace the package names with the ones your app requires.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb162-1"><a href="server-admin.html#cb162-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-2"><a href="server-admin.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> su <span class="at">-</span> <span class="at">-c</span> <span class="st">&quot;R -e </span><span class="dt">\&quot;</span><span class="st">install.packages(c(&#39;rmarkdown&#39;, &#39;ggplot2&#39;, &#39;dplyr&#39;, &#39;sp&#39;, &#39;rgdal&#39;, &#39;rgeos&#39;), repos=&#39;http://cran.rstudio.com/&#39;)</span><span class="dt">\&quot;</span><span class="st">&quot;</span></span></code></pre></div>
<p>NB: Installing R packages can take a long time. As we’re only using the small, free instance in this guide, you may find it grinds to a halt completely when trying to compile large libraries like seurat. This probably means you’ve run out of system memory. If that happens - see Setting up a swap file at the end of this guide.</p>
</div>
<div id="loading-your-app" class="section level3 hasAnchor" number="9.3.7">
<h3><span class="header-section-number">9.3.7</span> Loading your app<a href="server-admin.html#loading-your-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Assuming you’ve developed your app on a local R-Studio server, getting it onto its new home can be surprisingly tricky. I’ve found by far the easiest way is to use an SFTP client, such as Cyberduck, giving it the username and key pair you’ve already set up and just sending the files straight into your home directory.</p>
<p>Once you’ve transferred them, you’ll need to move them, including subdirectories, into /srv/shiny-server/.
Again, in your browser, go to YOUR-FLOATING-IP:3838. You’ll either see your working app, or an error page listing missing dependencies. If it’s the latter, follow the instructions above for installing R packages.</p>
<p>If you’re not getting any useful error messages on the site, check out the app-specific log files in /var/log/shiny-server/</p>
</div>
<div id="make-your-app-the-default-index-page" class="section level3 hasAnchor" number="9.3.8">
<h3><span class="header-section-number">9.3.8</span> Make your app the default index page<a href="server-admin.html#make-your-app-the-default-index-page" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You probably don’t want visitors to your site to specify that they want port 3838, so now we’re going to tell nginx to send visitors directly to your app.
First, we’re going to edit the nginx config file.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb163-1"><a href="server-admin.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/nginx/sites-available/default</span>
<span id="cb163-2"><a href="server-admin.html#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="server-admin.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Comment out (#) any other active server config lines, and add this…</span></span>
<span id="cb163-4"><a href="server-admin.html#cb163-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-5"><a href="server-admin.html#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="ex">server</span> {</span>
<span id="cb163-6"><a href="server-admin.html#cb163-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">listen</span> 80<span class="kw">;</span></span>
<span id="cb163-7"><a href="server-admin.html#cb163-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-8"><a href="server-admin.html#cb163-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">location</span> / {</span>
<span id="cb163-9"><a href="server-admin.html#cb163-9" aria-hidden="true" tabindex="-1"></a>        <span class="ex">proxy_pass</span> http://127.0.0.1:3838/<span class="kw">;</span></span>
<span id="cb163-10"><a href="server-admin.html#cb163-10" aria-hidden="true" tabindex="-1"></a>        <span class="ex">proxy_redirect</span> http://127.0.0.1:3838/ <span class="va">$scheme</span>://<span class="va">$host</span>/<span class="kw">;</span></span>
<span id="cb163-11"><a href="server-admin.html#cb163-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># note, the following 3 lines added 2016-07-11, see updates section</span></span>
<span id="cb163-12"><a href="server-admin.html#cb163-12" aria-hidden="true" tabindex="-1"></a>        <span class="ex">proxy_http_version</span> 1.1<span class="kw">;</span></span>
<span id="cb163-13"><a href="server-admin.html#cb163-13" aria-hidden="true" tabindex="-1"></a>        <span class="ex">proxy_set_header</span> Upgrade <span class="va">$http_upgrade</span><span class="kw">;</span></span>
<span id="cb163-14"><a href="server-admin.html#cb163-14" aria-hidden="true" tabindex="-1"></a>        <span class="ex">proxy_set_header</span> Connection <span class="st">&quot;upgrade&quot;</span><span class="kw">;</span></span>
<span id="cb163-15"><a href="server-admin.html#cb163-15" aria-hidden="true" tabindex="-1"></a>     <span class="er">}</span></span>
<span id="cb163-16"><a href="server-admin.html#cb163-16" aria-hidden="true" tabindex="-1"></a>    <span class="er">}</span></span></code></pre></div>
<p>Next, we’re going to update the Shiny server config file</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb164-1"><a href="server-admin.html#cb164-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-2"><a href="server-admin.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/shiny-server/shiny-server.conf</span>
<span id="cb164-3"><a href="server-admin.html#cb164-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-4"><a href="server-admin.html#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Add the following (if it’s not already there, which it may well be):</span></span>
<span id="cb164-5"><a href="server-admin.html#cb164-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-6"><a href="server-admin.html#cb164-6" aria-hidden="true" tabindex="-1"></a><span class="ex">server{</span></span>
<span id="cb164-7"><a href="server-admin.html#cb164-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">listen</span> 3838 127.0.0.1<span class="kw">;</span></span>
<span id="cb164-8"><a href="server-admin.html#cb164-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-9"><a href="server-admin.html#cb164-9" aria-hidden="true" tabindex="-1"></a>    <span class="ex">location</span> / {</span>
<span id="cb164-10"><a href="server-admin.html#cb164-10" aria-hidden="true" tabindex="-1"></a>      <span class="ex">site_dir</span> /srv/shiny-server<span class="kw">;</span></span>
<span id="cb164-11"><a href="server-admin.html#cb164-11" aria-hidden="true" tabindex="-1"></a>      <span class="ex">log_dir</span> /var/log/shiny-server<span class="kw">;</span></span>
<span id="cb164-12"><a href="server-admin.html#cb164-12" aria-hidden="true" tabindex="-1"></a>      <span class="ex">directory_index</span> on<span class="kw">;</span></span>
<span id="cb164-13"><a href="server-admin.html#cb164-13" aria-hidden="true" tabindex="-1"></a>    <span class="er">}</span></span>
<span id="cb164-14"><a href="server-admin.html#cb164-14" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span></code></pre></div>
<p>Go to your floating IP in the browser, without the 3838, and all should be well.</p>
</div>
<div id="getting-a-user-friendly-domain-name" class="section level3 hasAnchor" number="9.3.9">
<h3><span class="header-section-number">9.3.9</span> Getting a user-friendly domain name<a href="server-admin.html#getting-a-user-friendly-domain-name" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you want to share your app with the outside world, you’ll need to open it up beyond the UoE network and, preferably, give it a catchy URL.</p>
<p>Making your site public: Back in OpenStack, under the Network menu, click on Floating IP and disassociate your floating IP.
Now go up to Router and click clear gateway. Click Set Gateway and select Floating Network Public.
Back in Floating IPs, click Associate and select the external IP address (probably starting 129.x.x.x). Under port, select your instance.
Enter your external IP address into your browser, and your website should appear. It is now available outside the University network.</p>
<p>Setting up your domain name:
Your first step here is obviously to buy a domain name from one of the many providers on the internet.Once you have this, use your domain provider’s dashboard to edit DNS settings. You’re looking to change the ANAME or CNAME settings – delete what’s already there and set up a new ANAME record, with the public IP address of your site.</p>
</div>
<div id="appendix-1-password-protecting-your-site" class="section level3 hasAnchor" number="9.3.10">
<h3><span class="header-section-number">9.3.10</span> Appendix 1 – Password protecting your site<a href="server-admin.html#appendix-1-password-protecting-your-site" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You may want to add a basic password to your site. This is easily accomplished (though there are more robust password protection mechanisms out there, if you’re dealing with potentially sensitive data).</p>
<p>First, make sure you have Apache2-utils installed:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb165-1"><a href="server-admin.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First, make sure you have Apache2-utils installed:</span></span>
<span id="cb165-2"><a href="server-admin.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install apache2-utils</span>
<span id="cb165-3"><a href="server-admin.html#cb165-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-4"><a href="server-admin.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Now, stop nginx and shiny:</span></span>
<span id="cb165-5"><a href="server-admin.html#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> service nginx stop</span>
<span id="cb165-6"><a href="server-admin.html#cb165-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> stop shiny-server</span>
<span id="cb165-7"><a href="server-admin.html#cb165-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-8"><a href="server-admin.html#cb165-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Next, you’ll need to go back into that Nginx config file, with </span></span>
<span id="cb165-9"><a href="server-admin.html#cb165-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/nginx/sites-available/default</span>
<span id="cb165-10"><a href="server-admin.html#cb165-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-11"><a href="server-admin.html#cb165-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the following two lines in the &quot;location&quot; section</span></span>
<span id="cb165-12"><a href="server-admin.html#cb165-12" aria-hidden="true" tabindex="-1"></a><span class="ex">location</span> / {</span>
<span id="cb165-13"><a href="server-admin.html#cb165-13" aria-hidden="true" tabindex="-1"></a>      <span class="ex">proxy_pass</span> http://127.0.0.1:3838/<span class="kw">;</span></span>
<span id="cb165-14"><a href="server-admin.html#cb165-14" aria-hidden="true" tabindex="-1"></a>      <span class="ex">proxy_redirect</span> http://127.0.0.1:3838/ <span class="va">$scheme</span>://<span class="va">$host</span>/<span class="kw">;</span></span>
<span id="cb165-15"><a href="server-admin.html#cb165-15" aria-hidden="true" tabindex="-1"></a>      <span class="ex">auth_basic</span> <span class="st">&quot;Username and Password are required&quot;</span><span class="kw">;</span> </span>
<span id="cb165-16"><a href="server-admin.html#cb165-16" aria-hidden="true" tabindex="-1"></a>      <span class="ex">auth_basic_user_file</span> /etc/nginx/.htpasswd<span class="kw">;</span></span>
<span id="cb165-17"><a href="server-admin.html#cb165-17" aria-hidden="true" tabindex="-1"></a>    <span class="er">}</span></span></code></pre></div>
<p>Once that’s done, you’ll need to edit Shiny Server’s conf file so it only serves to loaclhost. Otherwise users would be able to creep around your authentication by going to port 3838.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb166-1"><a href="server-admin.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/shiny-server/shiny-server.conf</span>
<span id="cb166-2"><a href="server-admin.html#cb166-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-3"><a href="server-admin.html#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Copy and paste the below to your shiny-server.conf.</span></span>
<span id="cb166-4"><a href="server-admin.html#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="ex">server{</span></span>
<span id="cb166-5"><a href="server-admin.html#cb166-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">listen</span> 3838 127.0.0.1<span class="kw">;</span></span>
<span id="cb166-6"><a href="server-admin.html#cb166-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-7"><a href="server-admin.html#cb166-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">location</span> / {</span>
<span id="cb166-8"><a href="server-admin.html#cb166-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">site_dir</span> /srv/shiny-server<span class="kw">;</span></span>
<span id="cb166-9"><a href="server-admin.html#cb166-9" aria-hidden="true" tabindex="-1"></a>    <span class="ex">log_dir</span> /var/log/shiny-server<span class="kw">;</span></span>
<span id="cb166-10"><a href="server-admin.html#cb166-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">directory_index</span> on<span class="kw">;</span></span>
<span id="cb166-11"><a href="server-admin.html#cb166-11" aria-hidden="true" tabindex="-1"></a>    <span class="er">}</span></span>
<span id="cb166-12"><a href="server-admin.html#cb166-12" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span></code></pre></div>
<p>You’re now ready to create the username and password visitors must enter to view your site.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb167-1"><a href="server-admin.html#cb167-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-2"><a href="server-admin.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /etc/nginx</span>
<span id="cb167-3"><a href="server-admin.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> htpasswd <span class="at">-c</span> /etc/nginx/.htpasswd USERNAME</span>
<span id="cb167-4"><a href="server-admin.html#cb167-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-5"><a href="server-admin.html#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Restart Nginx and Shiny and you’re good to go.</span></span>
<span id="cb167-6"><a href="server-admin.html#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> service nginx start</span>
<span id="cb167-7"><a href="server-admin.html#cb167-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> start shiny-server</span></code></pre></div>
</div>
<div id="appendix-2-setting-up-a-swap-file" class="section level3 hasAnchor" number="9.3.11">
<h3><span class="header-section-number">9.3.11</span> APPENDIX 2 – Setting up a swap file<a href="server-admin.html#appendix-2-setting-up-a-swap-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If your instance grinds to a halt while compiling R packages, you’ve most likely run out of memory and will need to set up a swap file. Just enter the following commands:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb168-1"><a href="server-admin.html#cb168-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-2"><a href="server-admin.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> fallocate <span class="at">-l</span> 2G /swapfile</span>
<span id="cb168-3"><a href="server-admin.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dd if=/dev/zero of=/swapfile bs=1024 count=1048576</span>
<span id="cb168-4"><a href="server-admin.html#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 600 /swapfile</span>
<span id="cb168-5"><a href="server-admin.html#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkswap /swapfile</span>
<span id="cb168-6"><a href="server-admin.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> swapon /swapfile</span>
<span id="cb168-7"><a href="server-admin.html#cb168-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-8"><a href="server-admin.html#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Finally, make sure everything as it should be by running:</span></span>
<span id="cb168-9"><a href="server-admin.html#cb168-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> free <span class="at">-h</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="programming-in-rlang.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="redcap.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["cookbook.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
